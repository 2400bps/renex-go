(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s});var r=n(2),a=n.n(r),o=n(9),c={name:"MetaMask",slug:"metamask",description:"Sign in using the MetaMask extension or a Web3 browser",enabled:!0,getWeb3Provider:function(){var e=Object(o.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return t=e.sent,e.abrupt("return",[t,null]);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},s=function(){var e=Object(o.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=12;break}return e.prev=1,e.next=4,window.ethereum.enable();case 4:return e.abrupt("return",window.ethereum);case 7:throw e.prev=7,e.t0=e.catch(1),new Error("Please allow RenEx to access your MetaMask wallet");case 10:e.next=14;break;case 12:if(!window.web3){e.next=14;break}return e.abrupt("return",window.web3.currentProvider);case 14:throw new Error("Please ensure you have MetaMask installed");case 15:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()},20:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var r=n(11),a=Object(r.createStandardAction)("SET_POPUP")(),o=Object(r.createStandardAction)("CLEAR_POPUP")()},24:function(e,t,n){"use strict";var r=n(36),a=n.n(r),o=n(81),c=n.n(o),s=n(82),i=n.n(s),l=n(14),u=n(20),d=n(60),p=n(27),m=n(281),h=n(2),f=n.n(h),b=n(9),v=n(0),E=n(284),g=n.n(E),y=n(285),w=n.n(y),O=n(121),k=n.n(O),j=n(6),T=n(10),S=n(8),x=n(4),A=n(7),C=n(71),U=n(26),N=new RegExp(/^m\/(44'\/(?:0?1|60|61)')(\/\d\d?'?)*$/),L=[{value:"m/44'/60'/0'/0",label:"Default Derivation - m/44'/60'/0'/0"},{value:"m/44'/1'/0'/0",label:"Testnet - m/44'/1'/0'/0"}],B=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e))).validatePath=function(e){return N.test(e.label)},n.handleChange=function(e){n.setState({derivation:e})},n.handleUnlock=function(){var e=Object(b.a)(f.a.mark(function e(t){var r,a,o,c,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=n.props,a=r.checkConnection,o=r.resolve,c=n.state.derivation,n.setState({loading:!0}),e.prev=4,s=c.value){e.next=8;break}throw new Error("Invalid derivation");case 8:return e.t0=o,e.next=11,a({derivation:s});case 11:e.t1=e.sent,(0,e.t0)(e.t1),e.next=20;break;case 15:return e.prev=15,e.t2=e.catch(4),e.t2.message.match(/invalid transport instance/)?e.t2=new Error("Unable to connect to Ledger."):e.t2=new Error(e.t2?e.t2.message||e.t2:"Unable to connect to Ledger."),n.setState({loading:!1,error:e.t2.message}),e.abrupt("return");case 20:case"end":return e.stop()}},e,this,[[4,15]])}));return function(t){return e.apply(this,arguments)}}(),n.state={loading:!1,error:null,derivation:L[0]},n}return Object(A.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.loading;return v.createElement("div",{className:"popup ledger"},v.createElement("div",null,v.createElement("h2",null,"Connect to Ledger Wallet"),v.createElement("div",{className:"ledger--instructions"},v.createElement("p",null,"Before connecting to your Ledger, make sure you have:"),v.createElement("ol",null,v.createElement("li",null,"Connected and unlocked your Ledger"),v.createElement("li",null,"Opened the Ethereum app on the device"),v.createElement("li",null,"Enabled browser and data support"))),null!==t?v.createElement("p",{className:"red"},t):null,v.createElement("form",{onSubmit:this.handleUnlock},v.createElement(C.a,{value:this.state.derivation,onChange:this.handleChange,options:L,isValidNewOption:this.validatePath}),v.createElement("button",{type:"submit"},!0===n?v.createElement(U.a,null):"Connect"))))}}]),t}(v.Component),D=n(59),M=function(e){var t=new c.a;"m/"===e.slice(0,2)&&(e=e.slice(2));var n=w()(function(){return g.a.create()},{networkId:p.b.ethNetworkId,accountsLength:5,path:e});return t.addProvider(n),t.addProvider(new k.a),t.addProvider(new i.a({rpcUrl:p.a})),t.start(),t},P=function(){var e=Object(b.a)(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=M(t.derivation),e.t0=D.a,e.next=4,new a.a(n);case 4:return e.t1=e.sent,e.next=7,(0,e.t0)(e.t1);case 7:if((r=e.sent)&&0!==r.length){e.next=10;break}throw new Error("Unable to read accounts.");case 10:return e.abrupt("return",[n,r]);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),R={name:"Ledger",slug:"ledger",description:"Sign in using your Ledger hardware wallet",enabled:!0,getWeb3Provider:function(){var e=Object(b.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(function(){var e=Object(b.a)(f.a.mark(function e(n,r){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d.store.dispatch(Object(u.b)({popup:v.createElement(B,{resolve:n,reject:r,address:t,checkConnection:P}),onCancel:function(){r(new Error(z))}}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},I=n(287),_=n.n(I),F={name:"MockWallet",slug:"mock",description:"Mock wallet for testing purposes",enabled:!0,getWeb3Provider:function(){var e=Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new _.a);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},V={name:"Private Key",slug:"key",description:"",enabled:!1,getWeb3Provider:function(){return[q(),null]}},H={name:"Trezor",slug:"trezor",description:"Sign using your hardware wallet",enabled:!1,getWeb3Provider:function(){return[q(),null]}},W=n(122);n.d(t,"a",function(){return z}),n.d(t,"b",function(){return K}),n.d(t,"d",function(){return Y}),n.d(t,"f",function(){return G}),n.d(t,"g",function(){return q}),n.d(t,"c",function(){return X}),n.d(t,"e",function(){return J});var Y,z="Transaction canceled",K="Trader verification failed";!function(e){e[e.MetaMask=0]="MetaMask",e[e.Ledger=1]="Ledger",e[e.Trezor=2]="Trezor",e[e.Keystore=3]="Keystore",e[e.PrivateKey=4]="PrivateKey",e[e.MockWallet=5]="MockWallet"}(Y||(Y={}));var G=Object(l.List)([Y.MetaMask,Y.Ledger,Y.Keystore,Y.Trezor,Y.PrivateKey]),q=function(){var e=new c.a;return e.addProvider(new i.a({rpcUrl:p.a})),e.start(),e};function X(e){return new Promise(function(t,n){e(function(e){d.store.dispatch(Object(u.a)()),t(e)},function(e){d.store.dispatch(Object(u.a)()),n(e)})})}var J=Object(l.Map)().set(Y.MetaMask,W.a).set(Y.Ledger,R).set(Y.Keystore,m.a).set(Y.Trezor,H).set(Y.MockWallet,F).set(Y.PrivateKey,V)},26:function(e,t,n){"use strict";var r=n(6),a=n(10),o=n(8),c=n(4),s=n(7),i=n(0),l=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.alt;return i.createElement("div",{className:"loading lds-dual-ring ".concat(e?"alt":"")})}}]),t}(i.Component);t.a=l},27:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r=window.NETWORK,a="".concat(r.infura,"/").concat(window.INFURA_KEY)},281:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return w});var r=n(2),a=n.n(r),o=n(9),c=n(127),s=n(0),i=n(282),l=n.n(i),u=n(81),d=n.n(u),p=n(82),m=n.n(p),h=n(121),f=n.n(h),b=n(283),v=n(20),E=n(60),g=n(27),y=n(24),w={name:"Keystore File",slug:"keystore",description:"Sign in using a Keystore JSON file",enabled:!0,getWeb3Provider:function(){var t=Object(o.a)(a.a.mark(function t(n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(y.c)(function(){var t=Object(o.a)(a.a.mark(function t(r,i){var u,p,h,w,O,k,j,T;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.store.dispatch(Object(v.b)({popup:s.createElement(b.a,{resolve:t,reject:i,address:n}),onCancel:function(){i(new Error(y.a))}}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 2:if(u=t.sent,p=u.keystore,h=u.password,p.Crypto&&!p.crypto&&(p.crypto=p.Crypto),w=parseInt(p.version,10),t.prev=7,1!==w){t.next=12;break}O=c.fromV1(p,h),t.next=23;break;case 12:if(3!==w){t.next=16;break}O=c.fromV3(p,h),t.next=23;break;case 16:if(!p.privateKey){t.next=22;break}"0x"===(k=p.privateKey).slice(0,2)&&(k=k.slice(2)),O=c.fromPrivateKey(new e(k,"hex")),t.next=23;break;case 22:throw new Error("Unsupported keystore format");case 23:if(O){t.next=25;break}throw new Error("Unable to retrieve account from keystore");case 25:t.next=32;break;case 27:return t.prev=27,t.t0=t.catch(7),console.error(t.t0),"Not a V3 wallet"===t.t0.message||"Not a V1 wallet"===t.t0.message?i(new Error("Unsupported keystore format")):"Unsupported keystore format"===t.t0.message?i(t.t0):"Unable to retrieve account from keystore"===t.t0.message?i(t.t0):i(new Error("Unable to unlock keystore - the password may be wrong")),t.abrupt("return");case 32:O.getAddressesString=function(){return"0x".concat(O.getAddress().toString("hex"))},j=new l.a(O,{}),(T=new d.a).addProvider(j),T.addProvider(new f.a),T.addProvider(new m.a({rpcUrl:g.a})),T.start(),r([T,null]);case 40:case"end":return t.stop()}},t,this,[[7,27]])}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}).call(this,n(12).Buffer)},283:function(e,t,n){"use strict";var r=n(29),a=n(39),o=n(6),c=n(10),s=n(8),i=n(4),l=n(7),u=n(0),d=n(26),p=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleInput=function(e){var t=e.target;n.setState(function(e){return Object(a.a)({},e,Object(r.a)({},t.name,t.value))})},n.handleUpload=function(e){if(null!==e.target.files&&0!==e.target.files.length){var t=e.target.files[0],r=new FileReader;r.onload=function(e){var t;try{t=JSON.parse(e.target.result)}catch(r){return void n.setState({error:"Please select a valid Keystore file"})}n.setState({error:null,keystore:t})},r.readAsText(t)}},n.handleUnlock=function(e){if(e.preventDefault(),n.state.keystore){n.setState({loading:!0});var t=n.state.keystore,r=void 0===n.state.password?"":n.state.password;n.props.resolve({keystore:t,password:r})}else console.error("Invalid keystore")},n.state={error:null,keystore:null,loading:!1,password:""},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.password,r=e.loading,a=this.props.address;return u.createElement("div",{className:"popup keystore"},u.createElement("div",null,u.createElement("h2",null,a?"Log in to ".concat(a):"Select an account:"),u.createElement("form",{onSubmit:this.handleUnlock},u.createElement("input",{type:"file",name:"files[]",onChange:this.handleUpload}),u.createElement("input",{type:"password",name:"password",placeholder:"Password (optional)",value:n,onChange:this.handleInput}),u.createElement("button",{type:"submit"},!0===r?u.createElement(d.a,null):"Unlock")),null!==t?u.createElement("p",{className:"red"},t):null))}}]),t}(u.Component);t.a=p},295:function(e,t,n){e.exports=n(60)},348:function(e,t){},350:function(e,t){},386:function(e,t){},432:function(e,t){},59:function(e,t,n){"use strict";function r(e){return e.eth.getAccounts()}function a(e){return e.eth.net.getNetworkType()}function o(e,t){return r(e).then(function(e){return e.map(function(e){return e.toLowerCase()}).includes(t.toLowerCase())})}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o})},60:function(e,t,n){"use strict";n.r(t);var r=n(33),a=n(0),o=n.n(a),c=n(72),s=n(13),i=n(280),l=n(46),u=n(2),d=n.n(u),p=n(9),m=n(6),h=n(10),f=n(8),b=n(4),v=n(7),E=n(36),g=n.n(E),y=n(14),w=n(731),O=n(729),k=n(730),j=n(728),T=n(17),S=n(61),x=Object(S.a)(),A=n(18),C=n(11),U=Object(C.createStandardAction)("SET_ALERT")(),N=Object(C.createStandardAction)("CLEAR_ALERT")(),L=function(e){function t(e,n){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).alertInterval=void 0,r.handleClose=r.handleClose.bind(Object(A.a)(Object(A.a)(r))),r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.alert.message;null!==n&&n!==this.props.alert.message&&(this.alertInterval&&clearTimeout(this.alertInterval),this.alertInterval=setTimeout(function(){t.props.actions.clearAlert()},1e4))}},{key:"render",value:function(){var e=this.props.alert.message,t=this.props.alert.alertType;return""===e?null:a.createElement("div",{role:"alert",className:"alert ".concat(t)},a.createElement("span",{className:"alert--message"},e),a.createElement("span",{role:"button",className:"alert--cross",onClick:this.handleClose},"\xd7"))}},{key:"handleClose",value:function(){this.alertInterval&&clearInterval(this.alertInterval),this.props.actions.clearAlert()}}]),t}(a.Component);var B,D=Object(s.b)(function(e){return{alert:e.alert.alert}},function(e){return{actions:Object(T.b)({clearAlert:N},e)}})(L),M=n(727),P=n(3),R=n.n(P),I=Object(C.createStandardAction)("SET_MARKET")(),_=Object(C.createStandardAction)("SET_ORDER")(),F=Object(C.createStandardAction)("SET_BALANCE")(),V=n(5),H=n.n(V),W=n(27);!function(e){e[e.BTC_WBTC=2]="BTC_WBTC",e[e.BTC_ETH=1]="BTC_ETH",e[e.ETH_DGX=4294967552]="ETH_DGX",e[e.ETH_TUSD=4294967553]="ETH_TUSD",e[e.ETH_REN=4295032832]="ETH_REN",e[e.ETH_ZRX=4295032833]="ETH_ZRX",e[e.ETH_OMG=4295032834]="ETH_OMG"}(B||(B={}));var Y=Object(y.OrderedMap)().set(B.BTC_ETH,{code:B.BTC_ETH,orderSettlement:P.OrderSettlement.RenExAtomic,quoteToken:P.Token.BTC,baseToken:P.Token.ETH,category:P.Token.BTC}).set(B.BTC_WBTC,{code:B.BTC_WBTC,orderSettlement:P.OrderSettlement.RenExAtomic,quoteToken:P.Token.BTC,baseToken:P.Token.WBTC,category:P.Token.BTC,fixedPrice:new H.a(1)}).set(B.ETH_DGX,{code:B.ETH_DGX,orderSettlement:P.OrderSettlement.RenEx,quoteToken:P.Token.ETH,baseToken:P.Token.DGX}).set(B.ETH_TUSD,{code:B.ETH_TUSD,orderSettlement:P.OrderSettlement.RenEx,quoteToken:P.Token.ETH,baseToken:P.Token.TUSD}).set(B.ETH_REN,{code:B.ETH_REN,orderSettlement:P.OrderSettlement.RenEx,quoteToken:P.Token.ETH,baseToken:P.Token.REN}).set(B.ETH_ZRX,{code:B.ETH_ZRX,orderSettlement:P.OrderSettlement.RenEx,quoteToken:P.Token.ETH,baseToken:P.Token.ZRX}).set(B.ETH_OMG,{code:B.ETH_OMG,orderSettlement:P.OrderSettlement.RenEx,quoteToken:P.Token.ETH,baseToken:P.Token.OMG}),z=Object(y.Map)(),K={name:"Unknown",symbol:"???",icon:"",address:"0x0000000000000000000000000000000000000000",pairs:Object(y.OrderedMap)(),digits:0,cmcID:0,coingeckoID:"",settlements:[],offChain:!1};function G(e,t){return q.apply(this,arguments)}function q(){return(q=Object(p.a)(d.a.mark(function e(t,n){var r,a,o,c,s,i,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=z.get(t,void 0),a=z.get(n,void 0),void 0!==r&&void 0!==a){e.next=4;break}return e.abrupt("return",[0,0]);case 4:return o="https://api.coingecko.com/api/v3/coins/".concat(a.coingeckoID,"?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false"),e.next=7,fetch(o);case 7:return c=e.sent,e.next=10,c.json();case 10:return s=e.sent,i=s.market_data.current_price[r.symbol.toLowerCase()],null===(l=s.market_data.price_change_percentage_24h_in_currency[r.symbol.toLowerCase()])&&(l=0),null===i&&(i=0),e.abrupt("return",[i,l]);case 16:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}z=(z=(z=(z=(z=(z=(z=(z=z.set(P.Token.BTC,{name:"Bitcoin",symbol:"BTC",icon:"btc.svg",address:"",pairs:Object(y.OrderedMap)().set(P.Token.ETH,B.BTC_ETH).set(P.Token.WBTC,B.BTC_WBTC),digits:8,cmcID:1,coingeckoID:"bitcoin",settlements:[P.OrderSettlement.RenExAtomic],offChain:!0})).set(P.Token.ETH,{name:"Ethereum",symbol:"ETH",icon:"eth.svg",address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",pairs:Object(y.OrderedMap)().set(P.Token.DGX,B.ETH_DGX).set(P.Token.TUSD,B.ETH_TUSD).set(P.Token.REN,B.ETH_REN).set(P.Token.OMG,B.ETH_OMG).set(P.Token.ZRX,B.ETH_ZRX),digits:18,cmcID:1027,coingeckoID:"ethereum",settlements:[P.OrderSettlement.RenEx,P.OrderSettlement.RenExAtomic]})).set(P.Token.WBTC,{name:"Wrapped Bitcoin",symbol:"WBTC",icon:"wbtc.svg",address:"",pairs:Object(y.OrderedMap)(),digits:8,cmcID:1,coingeckoID:"bitcoin",settlements:[P.OrderSettlement.RenExAtomic],offChain:!0})).set(P.Token.DGX,{name:"Digix Gold Token",symbol:"DGX",icon:"dgx.svg",address:W.b.tokens.DGX,pairs:Object(y.OrderedMap)(),digits:9,cmcID:2739,coingeckoID:"digix-gold",settlements:[P.OrderSettlement.RenEx]})).set(P.Token.REN,{name:"Republic Protocol",symbol:"REN",icon:"ren.svg",address:W.b.tokens.REN,pairs:Object(y.OrderedMap)(),digits:18,cmcID:2539,coingeckoID:"republic-protocol",settlements:[P.OrderSettlement.RenEx]})).set(P.Token.TUSD,{name:"TrueUSD",symbol:"TUSD",icon:"tusd.svg",address:W.b.tokens.TUSD,pairs:Object(y.OrderedMap)(),digits:18,cmcID:2563,coingeckoID:"true-usd",settlements:[P.OrderSettlement.RenEx]})).set(P.Token.OMG,{name:"OmiseGo",symbol:"OMG",icon:"omg.svg",address:W.b.tokens.OMG,pairs:Object(y.OrderedMap)(),digits:18,cmcID:1808,coingeckoID:"omisego",settlements:[P.OrderSettlement.RenEx]})).set(P.Token.ZRX,{name:"0x",symbol:"ZRX",icon:"zrx.svg",address:W.b.tokens.ZRX,pairs:Object(y.OrderedMap)(),digits:18,cmcID:1896,coingeckoID:"0x",settlements:[P.OrderSettlement.RenEx]});var X=function(e){return e.filter(function(e){return-1!==z.get(e,K).settlements.indexOf(P.OrderSettlement.RenEx)}).toList()},J=function(e){return e.filter(function(e){return-1!==z.get(e,K).settlements.indexOf(P.OrderSettlement.RenExAtomic)}).toList()},Z=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sdk,n=e.market,r=e.usableBalances,o=e.usableAtomicBalances,c=e.supportedTokens,s=e.supportedAtomicTokens,i=Y.get(n).orderSettlement===P.OrderSettlement.RenExAtomic,l=X(c),u=J(s);return a.createElement("div",{className:"banner"},a.createElement("div",{className:"container"},a.createElement("div",{className:"banner--details"},i&&t.atom.isConnected()?a.createElement(a.Fragment,null,a.createElement("span",null,"Swapperd balances:"),a.createElement("ul",null,this.listBalances(u.toArray(),o))):a.createElement(a.Fragment,null,a.createElement("span",null,"Your balances:"),a.createElement("ul",null,this.listBalances(l.toArray(),r))))))}},{key:"listBalances",value:function(e,t){var r=[],o=!0,c=!1,s=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done);o=!0){var u=i.value,d=t.get(u,null),p=null!==d?d.toFixed():"-",m=z.get(u,K),h=m.symbol,f=m.icon,b=n(70)("./".concat(f));r.push(a.createElement("li",{key:u},a.createElement(M.a,{to:"/balances",onClick:this.handleClick.bind(this,u)},a.createElement("img",{alt:"",role:"presentation",src:b})," ",p," ",h)))}}catch(v){c=!0,s=v}finally{try{o||null==l.return||l.return()}finally{if(c)throw s}}return r}},{key:"handleClick",value:function(e){var t=this.props.balanceInputs,n={currency:e,depositAmount:t.depositAmount,withdrawAmount:t.withdrawAmount};e&&e!==this.props.balanceInputs.currency&&this.props.actions.setBalance({balanceInputs:n})}}]),t}(a.Component);var $,Q=Object(s.b)(function(e){return{sdk:e.sdk.sdk,supportedTokens:e.sdk.supportedTokens,supportedAtomicTokens:e.sdk.supportedAtomicTokens,market:e.inputs.market,balanceInputs:e.inputs.balanceInputs,usableBalances:e.trader.usableBalances,usableAtomicBalances:e.trader.usableAtomicBalances}},function(e){return{actions:Object(T.b)({setBalance:F},e)}})(Z),ee=n(31),te=n.n(ee),ne=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.description;return a.createElement("div",{className:"heading"},a.createElement("h1",{className:"heading--title"},t),n&&a.createElement("h2",{className:"heading--description"},"(",n,")"))}}]),t}(a.Component),re=n(26),ae=function(e,t){var n,r=(n=t.countDown?te.a.duration(te.a.unix(e).diff(te()())):te.a.duration(te()().diff(te.a.unix(e)))).asDays(),a=n.asHours(),o=n.asMinutes(),c=n.asSeconds(),s=t.suffix?" ".concat(t.suffix):"";return r>2?(r=Math.round(r),"".concat(r," ").concat(1===r?"day":"days").concat(s)):a>=1?(a=Math.round(a),"".concat(a," ").concat(1===a?"hour":"hours").concat(s)):o>=1?(o=Math.round(o),"".concat(o," ").concat(1===o?"minute":"minutes").concat(s)):t.showingSeconds&&c>=1?(c=Math.floor(c),"".concat(c," ").concat(1===c?"second":"seconds").concat(s)):"".concat(t.message)},oe=function(e){return new Promise(function(t){return setTimeout(t,e)})};!function(e){e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day"}($||($={}));var ce=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(t=te.a.unix(e).isBefore(te()())?te.a.duration(te()().diff(te.a.unix(e))):te.a.duration(te.a.unix(e).diff(te()()))).asDays(),a=t.asHours(),o=t.asMinutes();return r>2?$.Day:a>=1?$.Hour:o>=1||!n?$.Minute:$.Second},se=function(e,t){if(e.isZero())return new H.a(t).toFixed();var n=1-Math.floor(Math.log10(t)),r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.isEqualTo(0))return[0,0];var a,o=Math.floor(Math.log10(e.toNumber()))-(t-1),c=new H.a(10).exponentiatedBy(new H.a(o).toNumber());a=r?Math.floor(e.div(c.toNumber()).toNumber()):Math.ceil(e.div(c.toNumber()).toNumber());if(n)for(;a%10===0&&0!==a;)a/=10,o++;return[a,o]}(e,n,!1),a=Object(l.a)(r,2)[1],o=new H.a(10).pow(a+(n-1));return new H.a(t).times(o).toFixed()},ie=function(e){return se(e,.005)},le=function(e){return se(e,.2)};var ue=function(e){function t(e,n){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).timeout=void 0,r.rerender=void 0,r.state={highlightLatest:!1,receivedBalances:!1},r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.balanceHistory.size<e.balanceHistory.size&&(this.state.receivedBalances?(this.setState({highlightLatest:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.setState({highlightLatest:!1})},3e3)):this.setState({receivedBalances:!0}))}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout),this.rerender&&clearTimeout(this.rerender)}},{key:"render",value:function(){var e=this,t=this.props.balanceHistory,n=null;if(t.size>0){var r=t.toArray().map(function(e){return ce(e.time)}).reduce(function(e,t){return Math.min(e,t)},$.Day);this.rerender&&clearTimeout(this.rerender),this.rerender=setTimeout(function(){e.forceUpdate()},r/2),n=this.generateRows()}return a.createElement("div",{className:"section history"},a.createElement("div",{className:"container"},a.createElement(ne,{title:"Recent deposits and withdrawals"}),a.createElement("div",{className:"table--wrapper"},a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Transaction Hash"),a.createElement("th",null,"Date"),a.createElement("th",null,"Action"),a.createElement("th",null,"Amount"))),a.createElement("tbody",null,null!==n?n:a.createElement("tr",null,a.createElement("td",{colSpan:4},"No transactions")))))))}},{key:"generateRows",value:function(){var e=this.props,t=e.balanceHistory,n=e.sdk,r=this.state.highlightLatest,o=!1,c=t.toArray().reverse().map(function(e,t){if(e.trader.toLowerCase()!==n.getAddress().toLowerCase())return null;o=!0;var c="".concat(W.b.etherscan,"/tx/").concat(e.txHash),s=e.amount;return a.createElement("tr",{key:t,className:"".concat(0===t&&r?"recent":""," balanceAction--").concat(e.status)},a.createElement("td",{className:"monospace"},e.status===P.TransactionStatus.Pending?a.createElement(re.a,null):"",a.createElement("a",{href:c,rel:"noopener noreferrer",target:"_blank"},e.txHash),e.status===P.TransactionStatus.Failed?a.createElement("span",{className:"red"}," (failed)"):"",e.status===P.TransactionStatus.Replaced?a.createElement("span",{className:"red"}," (replaced)"):""),a.createElement("td",{title:te()(1e3*e.time).format("MMMM Do YYYY, HH:mm:ss")},a.createElement("span",null,ae(e.time,{message:"Just now",suffix:"ago",countDown:!1}))),a.createElement("td",null,e.action.charAt(0).toUpperCase()+e.action.slice(1)),a.createElement("td",null,s.toFixed()," ",z.get(e.token,K).symbol))});return o?c:null}}]),t}(a.Component);var de=Object(s.b)(function(e){return{balanceHistory:e.balanceHistory.balanceHistory,sdk:e.sdk.sdk,updateIndex:e.balanceHistory.updateIndex}})(ue),pe=n(98);function me(e){return function(e){function t(e){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).call(this,y.fromJS(e||{})))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"get",value:function(e){return Object(pe.a)(Object(b.a)(t.prototype),"get",this).call(this,e)}},{key:"set",value:function(e,n){return Object(pe.a)(Object(b.a)(t.prototype),"set",this).call(this,e,n)}},{key:"merge",value:function(e){return Object(pe.a)(Object(b.a)(t.prototype),"merge",this).call(this,e)}},{key:"toJS",value:function(){return Object(pe.a)(Object(b.a)(t.prototype),"toJS",this).call(this)}}]),t}(y.Record(e))}var he=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({market:B.ETH_REN,orderInputs:{side:P.OrderSide.BUY,pricepoint:"",volume:"",minVolume:""},balanceInputs:{currency:P.Token.ETH,depositAmount:new H.a(0).toFixed(),withdrawAmount:new H.a(0).toFixed()}})),fe=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({hiddenOrders:null})),be=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({traderOrders:Object(y.OrderedMap)(),cancelling:Object(y.Map)()})),ve=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({updateIndex:0,balanceHistory:Object(y.OrderedMap)()})),Ee=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"serialize",value:function(){return JSON.stringify({address:this.address,agreedToTerms:this.agreedToTerms})}},{key:"deserialize",value:function(e){var t=this;try{var n=JSON.parse(e);t=(t=t.set("address",n.address)).set("agreedToTerms",n.agreedToTerms)}catch(a){console.error(a),r.captureException("cannot deserialize local storage: ".concat(a))}return t}}]),t}(me({address:null,url:null,agreedToTerms:!1,wallet:null,atomicBalances:Object(y.OrderedMap)(),usableAtomicBalances:Object(y.OrderedMap)(),atomicAddresses:Object(y.OrderedMap)(),atomConnectionStatus:P.AtomicConnectionStatus.NotConnected,balances:Object(y.OrderedMap)(),accountBalances:Object(y.OrderedMap)(),usableBalances:Object(y.OrderedMap)()}));window.sdk=new R.a(new g.a.providers.HttpProvider(W.a),W.b);var ge,ye,we=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({sdk:window.sdk,supportedTokens:Object(y.List)(),supportedAtomicTokens:Object(y.List)(),supportedMarkets:Object(y.List)(),minEthTradeVolume:new H.a(0),darknodeFeePercent:new H.a(0),wrappingFeePercent:new H.a(0)})),Oe={price:0,percentChange:0},ke=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({marketPrices:Object(y.OrderedMap)()}));!function(e){e.Error="error",e.Warning="warning",e.Success="success"}(ge||(ge={})),function(e){e.Info="info",e.Warning="warning"}(ye||(ye={}));var je=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({alertType:ge.Warning,message:""})),Te=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({pendingAlerts:Object(y.Map)(),alert:{message:""}})),Se=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({popup:null,dismissible:!0,onCancel:function(){return null}})),xe=Object(C.createStandardAction)("ADD_PENDING_ALERT")(),Ae=Object(C.createStandardAction)("REMOVE_PENDING_ALERTS")(),Ce=n(20),Ue=n(24),Ne=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={error:null,logCount:0},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark(function e(){var t,n=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.call,e.next=3,t().catch(function(e){console.error(e);try{n.setState({error:e})}catch(t){console.error(t)}});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.error,t=this.props.closePopup,n=a.createElement("h2",null,"Creating transaction..."),r=a.createElement("p",null,"Please wait. Do not close this window.");if(e)switch(e.message){case Ue.a:n=a.createElement("h2",null,"Transaction canceled"),r=a.createElement("p",null);break;default:n=a.createElement("h2",{className:"red"},"Unable to complete transaction"),r=a.createElement("p",null,e.message)}return a.createElement("div",{className:"popup approve"},n,r,e&&a.createElement("div",{className:"popup--buttons"},a.createElement("button",{onClick:t},"Close")))}}]),t}(a.Component),Le=function(e,t){return{popup:a.createElement(Ne,{closePopup:t,call:e}),dismissible:!1,onCancel:t}},Be=n(23),De=n.n(Be),Me=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({symbol:"",baseToken:"",quoteToken:"",side:P.OrderSide.BUY,price:new H.a(0),volume:new H.a(0),minVolume:new H.a(0),type:P.OrderType.LIMIT,orderSettlement:P.OrderSettlement.RenEx,nonce:new De.a(0),expiry:0})),Pe=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({orderID:"",matchedID:"",receivedVolume:new H.a(0),spentVolume:new H.a(0),fee:new H.a(0),receivedToken:"",spentToken:""})),Re=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({spendToken:"",receiveToken:"",receiveVolume:new H.a(0),spendVolume:new H.a(0),date:0,feeAmount:new H.a(0),feeToken:"",orderSettlement:P.OrderSettlement.RenEx,nonce:new De.a(0)})),Ie=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({id:"",trader:"",status:P.OrderStatus.NOT_SUBMITTED,matchDetails:void 0,computedOrderDetails:new Re,orderInputs:new Me,transactionHash:""})),_e=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),t}(me({action:P.BalanceActionType.Withdraw,amount:new H.a(0),time:0,status:P.TransactionStatus.Pending,token:"",trader:"",txHash:"",nonce:void 0})),Fe=function(e){var t={id:e.id,trader:e.trader,status:e.status,matchDetails:e.matchDetails?new Pe(e.matchDetails):void 0,computedOrderDetails:new Re(e.computedOrderDetails),orderInputs:new Me(e.orderInputs),transactionHash:e.transactionHash};return new Ie(t)},Ve=Object(C.createStandardAction)("UPDATE_BALANCE")(),He=Object(C.createStandardAction)("UPDATE_BALANCES")(),We=Object(C.createStandardAction)("UPDATE_USABLE_BALANCES")(),Ye=Object(C.createStandardAction)("UPDATE_USABLE_BALANCE")(),ze=Object(C.createStandardAction)("UPDATE_ACCOUNT_BALANCE")(),Ke=Object(C.createStandardAction)("UPDATE_ACCOUNT_BALANCES")(),Ge=Object(C.createStandardAction)("UPDATE_ATOMIC_BALANCES")(),qe=Object(C.createStandardAction)("UPDATE_ATOMIC_ADDRESSES")(),Xe=Object(C.createStandardAction)("UPDATE_USABLE_ATOMIC_BALANCES")(),Je=function(e,t,n,r,a,o,c){return function(){var t=Object(p.a)(d.a.mark(function t(n){var r,a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===e||null===c||null===o||parseFloat(o)<=0)){t.next=2;break}throw new Error("Unable to deposit funds");case 2:if(!(r=new H.a(o)).lte(new H.a(0))){t.next=6;break}return n(U({alert:new je({message:"Please enter valid input"})})),t.abrupt("return");case 6:a=function(){return e.deposit(r,c,{awaitConfirmation:!1}).then(function(){var t=Object(p.a)(d.a.mark(function t(r){var a,o;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.balanceAction,o=new _e(a),n($e([o])),t.next=5,et(e)(n);case 5:n(Object(Ce.a)());case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},n(Object(Ce.b)(Le(a,function(){return n(Object(Ce.a)())})));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},Ze=function(e,t,n,r,a){return function(){var o=Object(p.a)(d.a.mark(function o(c){var s,i,l;return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(null===r||null===t||null===a||parseFloat(r)<=0||null===e)){o.next=2;break}throw new Error("Unable to withdraw funds");case 2:if(!(s=new H.a(r)).lte(new H.a(0))){o.next=6;break}return c(U({alert:new je({message:"Please enter valid input"})})),o.abrupt("return");case 6:if(void 0!==(i=n.get(a,void 0))&&null!==i){o.next=10;break}return console.error("Balance is null or undefined"),o.abrupt("return");case 10:if(!s.gt(i)){o.next=13;break}return console.error("Insufficient balance"),o.abrupt("return");case 13:l=function(){return e.withdraw(s,a,{awaitConfirmation:!1}).then(function(){var t=Object(p.a)(d.a.mark(function t(n){var r,a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.balanceAction,a=new _e(r),c($e([a])),t.next=5,et(e)(c);case 5:c(Object(Ce.a)());case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},c(Object(Ce.b)(Le(l,function(){return c(Object(Ce.a)())})));case 15:case"end":return o.stop()}},o,this)}));return function(e){return o.apply(this,arguments)}}()},$e=Object(C.createStandardAction)("PUSH_BALANCE")(),Qe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var a=Object(p.a)(d.a.mark(function a(o){var c;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:c=function(e){return void 0!==e&&e.status===P.TransactionStatus.Pending},n&&(c=function(){return!0}),t.filter(c).toArray().map(function(){var t=Object(p.a)(d.a.mark(function t(n){var a,c;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.fetchBalanceActionStatus(n.txHash);case 3:if((a=t.sent)!==P.TransactionStatus.Replaced){t.next=10;break}return t.next=7,oe(5e3);case 7:return t.next=9,e.fetchBalanceActionStatus(n.txHash);case 9:a=t.sent;case 10:a!==n.status&&(a===P.TransactionStatus.Done&&(c=function(){var e=Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=z.get(n.token),o(U({alert:new je({message:"".concat(n.amount," ").concat(t.symbol," has been successfully ").concat(n.action===P.BalanceActionType.Deposit?"deposited":"withdrawn"),alertType:ge.Success})}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),o(xe({id:n.txHash,method:c}))),n=n.set("status",a),o($e([n]))),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0),r.captureException(t.t0);case 17:case"end":return t.stop()}},t,this,[[0,13]])}));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},et=function(e,t){return function(){var n=Object(p.a)(d.a.mark(function n(a){var o,c,s,i,l;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=Object(y.OrderedMap)(),c=Object(y.OrderedMap)(),s=Object(y.OrderedMap)(),n.next=6,e.fetchSupportedTokens();case 6:return i=n.sent,n.next=9,e.fetchBalances(i);case 9:l=n.sent,i.forEach(function(e){var t=null,n=null,r=null,a=l.get(e);a&&(t=a.free,null!==a.free&&null!==a.used&&(n=a.free.plus(a.used)),r=a.nondeposited),o=o.set(e,t),c=c.set(e,n),s=s.set(e,r)}),a(We({usableBalances:o})),a(Ke({accountBalances:s})),a(He({balances:c})),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(0),console.error(n.t0),r.captureException(n.t0);case 20:t&&(a(Ae({ids:t.keySeq().toArray()})),t.toArray().map(function(e){e().catch(console.error)}));case 21:case"end":return n.stop()}},n,this,[[0,16]])}));return function(e){return n.apply(this,arguments)}}()},tt=function(e){return function(){var t=Object(p.a)(d.a.mark(function t(n){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.atom.isConnected()){t.next=3;break}return console.error("Cannot get atomic balances. Swapperd is not connected."),t.abrupt("return");case 3:return t.prev=3,t.next=6,e.fetchSupportedAtomicTokens();case 6:return a=t.sent,t.next=9,Promise.all([e.atom.fetchAddresses(a).then(function(e){var t=Object(y.OrderedMap)();a.map(function(n,r){t=t.set(n,e[r])}),n(qe({atomicAddresses:t}))}).catch(console.error),e.atom.fetchBalances(a).then(function(e){var t=Object(y.OrderedMap)(),r=Object(y.OrderedMap)();a.forEach(function(n){var a=e.get(n);if(a){var o=null;null!==a.free&&null!==a.used&&(o=a.free.plus(a.used)),t=t.set(n,o),r=r.set(n,a.free)}}),n(Ge({atomicBalances:t})),n(Xe({usableAtomicBalances:r}))}).catch(console.error)]);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),r.captureException(t.t0);case 15:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e){return t.apply(this,arguments)}}()},nt=(Object(C.createStandardAction)("SYNC_TRADER_ORDERS")(),Object(C.createStandardAction)("ADD_ORDERS")()),rt=Object(C.createStandardAction)("UPDATE_ORDER")(),at=Object(C.createStandardAction)("UPDATE_ORDER_CANCELLINGs")(),ot=(Object(C.createStandardAction)("CANCEL_LOCAL_ORDER")(),function(e,t){return function(n){return void 0!==n&&(n.trader.toLowerCase()===e.toLowerCase()&&!(!t&&n.status!==P.OrderStatus.OPEN&&n.status!==P.OrderStatus.NOT_SUBMITTED&&n.status!==P.OrderStatus.CONFIRMED))}}),ct=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var a=Object(p.a)(d.a.mark(function a(o){var c,s,i,l,u,m,h,f;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:c=t.toArray().filter(ot(e.getAddress(),n)),s=!0,i=!1,l=void 0,a.prev=4,u=d.a.mark(function t(){var n,a,c;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(n=h.value)){t.next=3;break}return t.abrupt("return",{v:void 0});case 3:return a=void 0,t.prev=4,t.next=7,e.fetchOrderStatus(n.id);case 7:a=t.sent,t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(4),console.error(t.t0),r.captureException(t.t0),t.abrupt("return","continue");case 15:if(n.matchDetails||a!==P.OrderStatus.SETTLED){t.next=28;break}return t.t1=n,t.t2=Pe,t.next=20,e.fetchMatchDetails(n.id);case 20:t.t3=t.sent,t.t4=new t.t2(t.t3),n=(n=t.t1.set.call(t.t1,"matchDetails",t.t4)).set("status",P.OrderStatus.SETTLED),c=function(){var e=Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o(nt([n])),o(U({alert:new je({alertType:ge.Success,message:"Your order has successfully been settled"})}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),o(xe({id:"settled: ".concat(n.id),method:c})),t.next=29;break;case 28:n.status!==a&&o(rt({orderID:n.id,orderStatus:a}));case 29:case"end":return t.stop()}},t,this,[[4,10]])}),m=c[Symbol.iterator]();case 7:if(s=(h=m.next()).done){a.next=19;break}return a.delegateYield(u(),"t0",9);case 9:f=a.t0,a.t1=f,a.next="continue"===a.t1?13:14;break;case 13:return a.abrupt("continue",16);case 14:if("object"!==typeof f){a.next=16;break}return a.abrupt("return",f.v);case 16:s=!0,a.next=7;break;case 19:a.next=25;break;case 21:a.prev=21,a.t2=a.catch(4),i=!0,l=a.t2;case 25:a.prev=25,a.prev=26,s||null==m.return||m.return();case 28:if(a.prev=28,!i){a.next=31;break}throw l;case 31:return a.finish(28);case 32:return a.finish(25);case 33:case"end":return a.stop()}},a,this,[[4,21,25,33],[26,,28,32]])}));return function(e){return a.apply(this,arguments)}}()},st=Object(C.createStandardAction)("STORE_WALLET")(),it=n(59),lt=Object(C.createStandardAction)("STORE_ADDRESS")(),ut=Object(C.createStandardAction)("STORE_URL")(),dt=function(e,t,n,r){return function(){var a=Object(p.a)(d.a.mark(function a(o){return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(it.b)(new g.a(t));case 2:if(a.t0=a.sent,a.t1=W.b.ethNetwork,a.t0===a.t1){a.next=7;break}return pt(e,{reload:!1})(o).catch(console.error),a.abrupt("return");case 7:o(lt(n)),e.updateProvider(t),e.setAddress(n),e.fetchTraderOrders().then(function(e){return o(nt(e.map(Fe)))}).catch(console.error),e.fetchBalanceActions().then(function(e){return o($e(e.map(function(e){return new _e(e)})))}).catch(console.error),r.redirect&&x.push(r.url?r.url:"/exchange");case 13:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},pt=function(e,t){return function(){var n=Object(p.a)(d.a.mark(function n(r){return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r(lt(null)),r(I({market:B.ETH_REN})),r(He({balances:Object(y.OrderedMap)()})),r(We({usableBalances:Object(y.OrderedMap)()})),r(Ke({accountBalances:Object(y.OrderedMap)()})),r(Ge({atomicBalances:Object(y.OrderedMap)()})),r(qe({atomicAddresses:Object(y.OrderedMap)()})),r(st({wallet:null})),e.updateProvider(new g.a.providers.HttpProvider(W.a)),e.setAddress(""),t.reload&&(x.push("/loading"),location.replace("/"));case 11:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},mt=function(e){return function(){var t=Object(p.a)(d.a.mark(function t(n){var r;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.getAddress()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.getWeb3().eth.getAccounts();case 4:t.t0=function(e){return e.toLowerCase()},(r=t.sent.map(t.t0)).includes(e.getAddress().toLowerCase())||(console.error("User has logged out of their web3 provider (".concat(e.getAddress()," not in [").concat(r.join(", "),"])")),pt(e,{reload:!0})(n).catch(console.error));case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()};function ht(){var e=new Array(4);function t(){var t=e[0]^e[0]<<11;return e[0]=e[1],e[1]=e[2],e[2]=e[3],e[3]=e[3]^e[3]>>19^t^t>>8,(e[3]>>>0)/(1<<31>>>0)}function n(){return"hsl("+Math.floor(360*t())+","+(60*t()+40+"%")+","+(25*(t()+t()+t()+t())+"%")+")"}function r(t){var r={};return r.size=t.size||8,r.scale=t.scale||4,r.seed=t.seed||Math.floor(Math.random()*Math.pow(10,16)).toString(16),r.color=t.color||n(),r.bgColor=t.bgColor||n(),r.spotColor=t.spotColor||n(),function(t){for(var n=0;n<e.length;n++)e[n]=0;for(var r=0;r<t.length;r++)e[r%4]=(e[r%4]<<5)-e[r%4]+t.charCodeAt(r)}(r.seed),r}function a(e,n){var a=function(e){for(var n=e,r=e,a=Math.ceil(n/2),o=n-a,c=[],s=0;s<r;s++){for(var i=[],l=0;l<a;l++)i[l]=Math.floor(2.3*t());var u=i.slice(0,o);u.reverse(),i=i.concat(u);for(var d=0;d<i.length;d++)c.push(i[d])}return c}((e=r(e||{})).size),o=Math.sqrt(a.length);n.width=n.height=e.size*e.scale;var c=n.getContext("2d");if(!c)return n;c.fillStyle=e.bgColor,c.fillRect(0,0,n.width,n.height),c.fillStyle=e.color;for(var s=0;s<a.length;s++)if(a[s]){var i=Math.floor(s/o),l=s%o;c.fillStyle=1===a[s]?e.color:e.spotColor,c.fillRect(l*e.scale,i*e.scale,e.scale,e.scale)}return n}return{create:function(e){e=r(e||{});var t=document.createElement("canvas");return a(e,t),t},render:a}}var ft=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).canvas=void 0,n.blocky=ht(),n.getOpts=function(e){return{seed:e.toUpperCase(),size:8,scale:10}},n.renderIcon=function(e){e?(n.setState({loading:!1}),n.blocky.create(n.getOpts(e)),n.canvas?n.blocky.render(n.getOpts(e),n.canvas):alert("No canvas!")):n.setState({loading:!0})},n.state={loading:!0},n.canvas=null,n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.renderIcon(e.address)}},{key:"componentDidMount",value:function(){this.renderIcon(this.props.address)}},{key:"render",value:function(){var e=this,t=this.props.address,n=this.state.loading;return a.createElement("div",{className:"blocky--outer"},a.createElement("div",{"data-tip":t||"..."},n?a.createElement("i",{className:"fa fa-spin fa-spinner blocky__loading"}):a.createElement("i",null),a.createElement("canvas",{className:"blocky",ref:function(t){return e.canvas=t}})))}}]),t}(a.Component),bt=function(e){function t(e,n){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).state={copied:!1,dropdownVisible:!1},r.showDropdown=r.showDropdown.bind(Object(A.a)(Object(A.a)(r))),r.hideDropdown=r.hideDropdown.bind(Object(A.a)(Object(A.a)(r))),r.copyToClipboard=r.copyToClipboard.bind(Object(A.a)(Object(A.a)(r))),r.handleLogOut=r.handleLogOut.bind(Object(A.a)(Object(A.a)(r))),r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.address,n=e.withMenu,r=this.state,o=r.dropdownVisible,c=r.copied,s=(this.props.location?this.props.location.pathname:"").split("/")[1],i=null!=t;return a.createElement("div",{className:"header"},a.createElement("div",{className:"container"},a.createElement(M.a,{to:i?"/exchange":"/"},a.createElement("div",{className:"header--logo"})),n?a.createElement("ul",{className:"header--menu"},a.createElement("li",{className:"exchange"===s?"active":""},a.createElement(M.a,{to:"/exchange"},a.createElement("span",null,"Exchange"))),a.createElement("li",{className:"orders"===s?"active":""},a.createElement(M.a,{to:"/orders"},a.createElement("span",null,"Orders"))),a.createElement("li",{className:"balances"===s?"active":""},a.createElement(M.a,{to:"/balances"},a.createElement("span",null,"Balances"))),a.createElement("li",{className:"header--logout",onClick:this.handleLogOut},a.createElement(M.a,{to:""},a.createElement("span",null,"Logout"))),t&&a.createElement("li",{className:"header--account",onMouseEnter:this.showDropdown,onMouseLeave:this.hideDropdown},a.createElement(ft,{address:t}),o?a.createElement("ul",{className:"header--dropdown"},a.createElement("li",{role:"button",onClick:this.copyToClipboard},a.createElement("span",{"data-addr":t},c?a.createElement("span",null,"Copied"):a.createElement("span",null,t.substring(0,8),"...",t.slice(-5)))),a.createElement("li",{role:"button",onClick:this.handleLogOut},"Logout")):null)):null))}},{key:"showDropdown",value:function(){this.setState({dropdownVisible:!0,copied:!1})}},{key:"hideDropdown",value:function(){this.setState({dropdownVisible:!1,copied:!1})}},{key:"copyToClipboard",value:function(e){var t=e.currentTarget.childNodes[0].getAttribute("data-addr");if(t){var n=document.createElement("input");document.body.appendChild(n),n.setAttribute("value",t),n.select(),document.execCommand("copy"),document.body.removeChild(n)}this.setState({copied:!0})}},{key:"handleLogOut",value:function(){var e=this.props.sdk;this.props.actions.logout(e,{reload:!0})}}]),t}(a.Component);var vt=Object(w.a)(Object(s.b)(function(e){return{address:e.trader.address,sdk:e.sdk.sdk}},function(e){return{actions:Object(T.b)({logout:pt},e)}})(bt)),Et=n(29),gt=n(39),yt=n(71),wt=n(288),Ot=function(e){var t=z.get(e.value.value,K).icon,r=n(70)("./".concat(t));return a.createElement("div",{className:"Select-value"},a.createElement("span",{className:"Select-value-label"},a.createElement("img",{alt:"",role:"presentation",src:r}),a.createElement("span",null,a.createElement("b",null,e.value.symbol)," \u2013 ",e.value.name,e.value.orderSettlement===P.OrderSettlement.RenExAtomic?" (atomic)":"")))},kt=n.n(wt)()({handleMouseDown:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelect(this.props.option,e)},handleMouseEnter:function(e){this.props.onFocus(this.props.option,e)},handleMouseMove:function(e){this.props.isFocused||this.props.onFocus(this.props.option,e)},render:function(){var e=z.get(this.props.option.value,K).icon,t=n(70)("./".concat(e));return a.createElement("div",{role:"button",className:this.props.className,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove},a.createElement("img",{role:"presentation",alt:"",src:t}),this.props.children)}}),jt=function(e){function t(e,n){var r;Object(m.a)(this,t);var a,o,c=(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).props.market,s=Y.get(c,void 0);return s&&(o=(a=s.category||s.quoteToken)===s.quoteToken?s.baseToken:s.quoteToken),r.state={fstCode:a,sndCode:o},r.handleChange=r.handleChange.bind(Object(A.a)(Object(A.a)(r))),r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.market,n=Y.get(t,void 0);if(n){var r=this.state,a=r.fstCode,o=r.sndCode;t!==this.props.market&&(o=(a=n.category||n.quoteToken)===n.quoteToken?n.baseToken:n.quoteToken,this.setState({fstCode:a,sndCode:o}))}}},{key:"render",value:function(){var e=this.state,t=e.fstCode,n=e.sndCode;if(void 0===t||void 0===n)return a.createElement(a.Fragment,null);var r=this.listCurrencies();return a.createElement("div",{className:"order--currencies"},a.createElement(yt.b,{className:"Select--currency",name:"fstCode",value:t,onChange:this.handleChange,options:r,valueComponent:Ot,optionComponent:kt,clearable:!1,backspaceRemoves:!1,deleteRemoves:!1,disabled:r.length<2}),a.createElement(yt.b,{className:"Select--currency",name:"sndCode",value:n,onChange:this.handleChange,options:this.listPairs(t),valueComponent:Ot,optionComponent:kt,clearable:!1,backspaceRemoves:!1,deleteRemoves:!1}))}},{key:"handleChange",value:function(e){var t=this;this.setState(function(t){return Object(gt.a)({},t,Object(Et.a)({},e.field,e.value))},function(){x.push("/exchange"),t.props.actions.setMarket({market:e.market})})}},{key:"listCurrencies",value:function(){var e=this.props,t=e.supportedTokens,n=e.supportedAtomicTokens,r=[],a=t.concat(n).toArray();return Array.from(new Set(a)).forEach(function(e){if(z.get(e,K).pairs.size>0){var t=z.get(e,K),n=t.symbol,a=t.name,o=t.pairs;r.push({field:"fstCode",label:"".concat(n," \u2013 ").concat(a),name:a,symbol:n,value:e,market:o.first()})}}),r}},{key:"listPairs",value:function(e){return z.get(e,K).pairs.map(function(e,t){var n=Y.get(e,void 0);if(n){var r=n.orderSettlement,a=n.code,o=z.get(t,K),c=o.symbol,s=o.name;return{field:"sndCode",label:"".concat(c," \u2013 ").concat(s).concat(r===P.OrderSettlement.RenExAtomic?" (atomic)":""),name:s,symbol:c,value:t,orderSettlement:r,market:a}}}).toArray().filter(function(e){return void 0!==e})}}]),t}(a.Component);var Tt=Object(s.b)(function(e){return{market:e.inputs.market,supportedTokens:e.sdk.supportedTokens,supportedAtomicTokens:e.sdk.supportedAtomicTokens}},function(e){return{actions:Object(T.b)({setMarket:I},e)}})(jt),St=function(e){function t(e,n){var r;Object(m.a)(this,t);var a=(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).props.balanceInputs,o=a.currency,c=a.depositAmount,s=a.withdrawAmount;return r.state={currency:o,depositAmount:c,withdrawAmount:s,balanceHistorySize:0,pendingWithdrawal:!1},r.deposit=r.deposit.bind(Object(A.a)(Object(A.a)(r))),r.withdraw=r.withdraw.bind(Object(A.a)(Object(A.a)(r))),r.fillDeposit=r.fillDeposit.bind(Object(A.a)(Object(A.a)(r))),r.fillWithdraw=r.fillWithdraw.bind(Object(A.a)(Object(A.a)(r))),r.handleChange=r.handleChange.bind(Object(A.a)(Object(A.a)(r))),r.handleInput=r.handleInput.bind(Object(A.a)(Object(A.a)(r))),r.handleBlur=r.handleBlur.bind(Object(A.a)(Object(A.a)(r))),r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.balanceHistory,n=e.balanceInputs.currency;if(n!==this.state.currency&&this.setState({currency:n}),t.size!==this.state.balanceHistorySize||this.state.pendingWithdrawal){this.setState({balanceHistorySize:t.size});var r=t.filter(function(e){return void 0!==e&&e.action===P.BalanceActionType.Withdraw&&e.status===P.TransactionStatus.Pending}).size>0;r!==this.state.pendingWithdrawal&&this.setState({pendingWithdrawal:r})}}},{key:"componentWillUnmount",value:function(){var e=this.state,t=e.currency,n=e.depositAmount,r=e.withdrawAmount;if(t&&n&&r){var a={currency:t,depositAmount:n,withdrawAmount:r};this.props.actions.setBalance({balanceInputs:a})}}},{key:"render",value:function(){var e=this.props,t=e.usableBalances,n=e.accountBalances,r=this.state,o=r.currency,c=r.depositAmount,s=r.withdrawAmount,i=new H.a(c),l=new H.a(s),u=n.get(o)||new H.a(0),d=t.get(o)||new H.a(0),p=!i.gt(new H.a(0))||!i.lte(u),m=!l.gt(new H.a(0))||!l.lte(d);return a.createElement("div",{className:"manage"},a.createElement("div",{className:"container"},a.createElement(ne,{title:"Deposit or Withdraw"}),a.createElement("div",{className:"manage--form"},a.createElement(yt.b,{className:"Select--currency",name:"token",value:o,onChange:this.handleChange,options:this.listCurrencies(),valueComponent:Ot,optionComponent:kt,clearable:!1,backspaceRemoves:!1,deleteRemoves:!1}),a.createElement("div",{className:"manage--row"},a.createElement("label",null,a.createElement("div",{className:"manage--title"},a.createElement("span",null,"Deposit (",a.createElement("span",{role:"button",className:"manage--option",onClick:this.fillDeposit},"Max"),")")),a.createElement("span",{className:"manage--input-item"},a.createElement("input",{role:"textbox",type:"number",value:c,name:"depositAmount",min:0,onChange:this.handleInput,onBlur:this.handleBlur}),a.createElement("span",null,z.get(o,K).symbol),a.createElement("button",{disabled:p,onClick:this.deposit},"Deposit"))),a.createElement("label",null,a.createElement("div",{className:"manage--title"},a.createElement("span",null,"Withdraw (",a.createElement("span",{role:"button",className:"manage--option",onClick:this.fillWithdraw},"Max"),")")),a.createElement("span",{className:"manage--input-item"},a.createElement("input",{role:"textbox",type:"number",value:s,name:"withdrawAmount",min:0,onChange:this.handleInput,onBlur:this.handleBlur}),a.createElement("span",null,z.get(o,K).symbol),a.createElement("button",{disabled:m,onClick:this.withdraw},"Withdraw")))))))}},{key:"deposit",value:function(){var e=Object(p.a)(d.a.mark(function e(){var t,n,r,a,o,c,s,i,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.sdk,r=t.balanceHistory,a=t.traderOrders,o=t.usableBalances,c=t.accountBalances,s=this.state,i=s.currency,l=s.depositAmount,e.prev=2,e.next=5,this.props.actions.deposit(n,r,a,o,c,l,i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),e.t0.message!==Ue.a&&this.props.actions.setAlert({alert:new je({alertType:ge.Error,message:e.t0.message||e.t0})});case 10:case"end":return e.stop()}},e,this,[[2,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=Object(p.a)(d.a.mark(function e(){var t,n,r,a,o,c,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.sdk,r=t.balances,a=t.usableBalances,o=this.state,c=o.currency,s=o.withdrawAmount,!o.pendingWithdrawal){e.next=5;break}return this.props.actions.setAlert({alert:new je({message:"Please wait until the current withdrawal is complete"})}),e.abrupt("return");case 5:return e.prev=5,e.next=8,this.props.actions.withdraw(n,r,a,s,c);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),e.t0.message!==Ue.a&&this.props.actions.setAlert({alert:new je({alertType:ge.Error,message:e.t0.message||e.t0})});case 13:case"end":return e.stop()}},e,this,[[5,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"fillDeposit",value:function(){var e=Object(p.a)(d.a.mark(function e(){var t,n,r,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,t.sdk,n=t.accountBalances,r=this.state.currency,a=n.get(r)||new H.a(0),r===P.Token.ETH&&(a=a.minus(new H.a("0.1"))).lt(new H.a(0))&&(a=new H.a(0)),this.setState({depositAmount:a.toFixed()});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fillWithdraw",value:function(){var e=this.props.usableBalances,t=this.state.currency,n=e.get(t)||new H.a(0);this.setState({withdrawAmount:n.toFixed()})}},{key:"listCurrencies",value:function(){var e=this.props.supportedTokens,t=[];return X(e).forEach(function(e){var n=z.get(e,K),r=n.symbol,a=n.name;t.push({label:"".concat(r," \u2013 ").concat(a),name:a,symbol:r,value:e})}),t}},{key:"handleChange",value:function(e){var t=this.state,n=t.depositAmount,r=t.withdrawAmount,a=e.value;this.setState({currency:a});var o={currency:a,depositAmount:n,withdrawAmount:r};this.props.actions.setBalance({balanceInputs:o})}},{key:"handleInput",value:function(e){var t=e.target;this.setState(function(e){return Object(gt.a)({},e,Object(Et.a)({},t.name,t.value))})}},{key:"handleBlur",value:function(e){var t,n=this.props,r=n.accountBalances,a=n.usableBalances,o=this.state.currency,c=e.target;switch(c.name){case"withdrawAmount":t=a.get(o)||new H.a(0);break;case"depositAmount":t=r.get(o)||new H.a(0);break;default:return}var s=new H.a(c.value);s.gt(t)&&(s=t),this.setState(function(e){return Object(gt.a)({},e,Object(Et.a)({},c.name,s))})}}]),t}(a.Component);var xt=Object(s.b)(function(e){return{accountBalances:e.trader.accountBalances,balanceHistory:e.balanceHistory.balanceHistory,balanceInputs:e.inputs.balanceInputs,balances:e.trader.balances,traderOrders:e.traderBook.traderOrders,usableBalances:e.trader.usableBalances,sdk:e.sdk.sdk,supportedTokens:e.sdk.supportedTokens}},function(e){return{actions:Object(T.b)({deposit:Je,setAlert:U,setBalance:F,withdraw:Ze},e)}})(St),At=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"market"},a.createElement("div",{className:"container"},a.createElement("ul",{className:"market--items"},this.listPairs())))}},{key:"listPairs",value:function(){var e=this,t=this.props.marketPrices,n=0;return Y.map(function(r){n++;var o=r.code,c=t.get(o,void 0);if(void 0===c||o===B.BTC_WBTC)return a.createElement("div",{key:n});var s=c?"".concat(c.percentChange.toFixed(2),"%"):"",i=c?c.price:"",l=z.get(r.quoteToken,void 0),u=z.get(r.baseToken,void 0);return l&&u?a.createElement("li",{key:n,title:i.toString()},a.createElement(M.a,{to:"/exchange",onClick:e.updateMarket.bind(e,o)},a.createElement("span",null,"".concat(u.symbol,"/").concat(l.symbol),":")),a.createElement("span",{className:"".concat(c.percentChange<0?"negative":"positive")},s)):a.createElement("div",{key:n})}).toArray()}},{key:"updateMarket",value:function(e){e!==this.props.market&&this.props.actions.setMarket({market:e})}}]),t}(a.Component);var Ct=Object(s.b)(function(e){return{market:e.inputs.market,marketPrices:e.marketPrices.marketPrices}},function(e){return{actions:Object(T.b)({setMarket:I},e)}})(At),Ut=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).callSign=Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.sign,n.setState({signing:!0,error:null}),e.prev=2,e.next=5,t();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),n.setState({error:e.t0.message||e.t0});case 10:n.setState({signing:!1});case 11:case"end":return e.stop()}},e,this,[[2,7]])})),n.state={error:null,signing:!0},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.callSign().catch(null);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.signing,n=e.error,r=this.props.data;return a.createElement("div",{className:"popup sign"},a.createElement("h2",null,"Approve signature"),a.createElement("p",{className:"sign--data"},r.map(function(e,t){return a.createElement("span",{key:t,className:"monospace sign--datum"},e)})),t?a.createElement(a.Fragment,null,a.createElement(re.a,null)):a.createElement(a.Fragment,null,n?a.createElement("p",{className:"red"},n):null,a.createElement("button",{className:"sign--button",onClick:this.callSign},"Try again")))}}]),t}(a.Component),Nt=Object(C.createStandardAction)("UPDATE_ATOM_CONNECTION_STATUS")(),Lt=function(e){return function(){var t=Object(p.a)(d.a.mark(function t(n){var r;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.atom.refreshStatus();case 2:r=t.sent,n(Nt({atomConnectionStatus:r}));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},Bt=function(e){return function(){var t=Object(p.a)(d.a.mark(function t(n){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,r){var o=["RenEx:","authorize:",e._atomConnectedAddress],c=function(){var r=Object(p.a)(d.a.mark(function r(){var a;return d.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.atom.authorize();case 2:return a=r.sent,n(Object(Ce.a)()),r.abrupt("return",t(a));case 5:case"end":return r.stop()}},r,this)}));return function(){return r.apply(this,arguments)}}(),s=a.createElement(Ut,{data:o,sign:c});n(Object(Ce.b)({popup:s,onCancel:function(){n(Object(Ce.a)()),r()}}))}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},Dt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).handleLinkAtom=function(){var e=Object(p.a)(d.a.mark(function e(t){var r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.actions,n.setState({linkError:null,linkPending:!0}),e.abrupt("return",t().then(function(e){n.setState({linkPending:!1}),r.updateAtomConnectionStatus({atomConnectionStatus:e})}).catch(function(){n.setState({linkPending:!1})}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={linkError:null,linkPending:!1},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.sdk,o=n.atomConnectionStatus,c=this.state,s=c.linkPending,i=c.linkError,l=a.createElement("button",{onClick:Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleLinkAtom(r.atom.resetStatus);case 2:case"end":return e.stop()}},e,this)})),disabled:s},s?a.createElement(re.a,null):"Retry");switch(o){case P.AtomicConnectionStatus.NotConnected:e=a.createElement(a.Fragment,null,a.createElement("h2",null,"Could not detect Swapperd"),a.createElement("p",null,"The Swapperd software is required for trading atomic swap pairs and viewing atomic balances. You can download the software using the links below:"),a.createElement("ul",null,a.createElement("li",null,a.createElement("a",{href:"https://releases.republicprotocol.com/swapperd/Swapperd.exe"},"Swapperd for Windows")),a.createElement("li",null,a.createElement("a",{href:"https://releases.republicprotocol.com/swapperd/Swapperd.dmg"},"Swapperd for MacOS"))),i&&a.createElement("p",{className:"red"},i),l);break;case P.AtomicConnectionStatus.NotAuthorized:e=a.createElement(a.Fragment,null,a.createElement("p",null,"Your Swapperd has not been configured for this wallet. Please update your Swapperd configuration."),i&&a.createElement("p",{className:"red"},i),l);break;case P.AtomicConnectionStatus.AtomNotAuthorized:e=a.createElement(a.Fragment,null,a.createElement("p",null,"Your Swapperd needs to be authorized to action orders on your behalf."),i&&a.createElement("p",{className:"red"},i),a.createElement("button",{onClick:Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleLinkAtom(function(){return t.props.actions.authorizeSwapper(r)});case 2:case"end":return e.stop()}},e,this)})),disabled:s},s?a.createElement(re.a,null):i?"Retry":"Authorize"));break;case P.AtomicConnectionStatus.ChangedSwapper:e=a.createElement(a.Fragment,null,a.createElement("p",null,"Your Swapperd details have changed. After ensuring your Swapperd details are correct and have been correctly configured correctly, click the Reconnect button."),i&&a.createElement("p",{className:"red"},i),l);break;case P.AtomicConnectionStatus.InvalidSwapper:e=a.createElement(a.Fragment,null,a.createElement("p",null,"Unable to verify authenticity of Swapperd. Please try updating the application."),i&&a.createElement("p",{className:"red"},i),l);break;default:e=a.createElement("p",null,"Unknown Swapperd connection status: ",o)}return a.createElement("div",{className:"order--wrapper"},e)}}]),t}(a.Component);var Mt=Object(s.b)(function(e){return{sdk:e.sdk.sdk,atomConnectionStatus:e.trader.atomConnectionStatus}},function(e){return{actions:Object(T.b)({authorizeSwapper:Bt,updateAtomConnectionStatus:Nt},e)}})(Dt),Pt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={top:0,left:0},n.onMouseEnter=n.onMouseEnter.bind(Object(A.a)(Object(A.a)(n))),n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.children,r=t||ye.Info;return a.createElement("div",{className:"label"},a.createElement("div",{className:"label--icon ".concat(r,"--icon"),onMouseEnter:this.onMouseEnter}),a.createElement("div",{style:this.state,className:"label--message"},n||""))}},{key:"onMouseEnter",value:function(e){var t=e.currentTarget.getBoundingClientRect(),n=t.top,r=t.left,a=t.width,o=t.height;this.setState({top:n-o/2,left:r+a/2})}}]),t}(a.Component),Rt=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"section view"},a.createElement("div",{className:"container"},a.createElement(ne,{title:"Balances held by Swapperd"}),this.atomConnected()?a.createElement("div",{className:"table--wrapper"},a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Token"),a.createElement("th",null,"Address"),a.createElement("th",null,"Total Balance"),a.createElement("th",null,"Usable Balance",a.createElement(Pt,null,"The amount you have deposited, excluding balances locked in open orders.")))),a.createElement("tbody",null,this.generateRows()))):a.createElement(Mt,null)))}},{key:"atomConnected",value:function(){var e=this.props.atomConnectionStatus;return e===P.AtomicConnectionStatus.ConnectedLocked||e===P.AtomicConnectionStatus.ConnectedUnlocked}},{key:"generateRows",value:function(){var e=[],t=this.props,r=t.atomicAddresses,o=t.atomicBalances,c=t.usableAtomicBalances,s=t.supportedAtomicTokens;return J(s).forEach(function(t){var s=z.get(t,K),i=s.name,l=s.symbol,u=s.icon,d=r.get(t,void 0)||"-",p=o.get(t,void 0),m=void 0!==p&&null!==p?"".concat(p.toFixed()," ").concat(l):"-",h=c.get(t,void 0),f=void 0!==h&&null!==h?"".concat(h.toFixed()," ").concat(l):"-",b=n(70)("./".concat(u));e.push(a.createElement("tr",{key:t},a.createElement("td",null,a.createElement("img",{alt:"",role:"presentation",src:b}),a.createElement("span",null,"".concat(i," "))),a.createElement("td",{className:"monospace"},d),a.createElement("td",null,m,null===p&&a.createElement(Pt,{type:ye.Warning},"Failed to retrieve total ",l," balance.")),a.createElement("td",null,f,null===h&&a.createElement(Pt,{type:ye.Warning},"Failed to retrieve usable ",l," balance."))))}),e}}]),t}(a.Component);var It=Object(s.b)(function(e){return{atomicAddresses:e.trader.atomicAddresses,atomicBalances:e.trader.atomicBalances,usableAtomicBalances:e.trader.usableAtomicBalances,atomConnectionStatus:e.trader.atomConnectionStatus,supportedAtomicTokens:e.sdk.supportedAtomicTokens}})(Rt),_t=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"section view"},a.createElement("div",{className:"container"},a.createElement(ne,{title:"Your balances"}),a.createElement("div",{className:"table--wrapper"},a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Token"),a.createElement("th",null,"Non-Deposited Balance"),a.createElement("th",null,"Deposited Balance",a.createElement(Pt,null,"The amount you have deposited to your RenEx wallet.")),a.createElement("th",null,"Usable Balance",a.createElement(Pt,null,"The amount you have deposited, excluding balances locked in open orders or pending withdrawals.")))),a.createElement("tbody",null,this.generateRows())))))}},{key:"generateRows",value:function(){var e=this.props,t=e.balances,r=e.usableBalances,o=e.accountBalances,c=e.supportedTokens,s=[];return X(c).forEach(function(e){var c,i=z.get(e,K),l=i.name,u=i.symbol,d=i.icon,p=i.address,m=t.get(e,null),h=r.get(e,null),f=o.get(e,null),b=null!==m?m.toFixed():"-",v=null!==h?h.toFixed():"-",E=null!==f?f.toFixed():"-",g=n(70)("./".concat(d));if(e!==P.Token.ETH){var y="".concat(W.b.etherscan,"/token/").concat(p);c=a.createElement("a",{className:"view--external",href:y,rel:"noopener noreferrer",target:"_blank",title:"View on Etherscan"},a.createElement("span",null,"\u2192"))}s.push(a.createElement("tr",{key:e},a.createElement("td",null,a.createElement("img",{alt:"",role:"presentation",src:g}),a.createElement("span",null,"".concat(l," ")),c),a.createElement("td",null,"".concat(E," ").concat(u),null===f&&a.createElement(Pt,{type:ye.Warning},"Failed to retrieve non-deposited ",u," balance.")),a.createElement("td",null,"".concat(b," ").concat(u),null===m&&a.createElement(Pt,{type:ye.Warning},"Failed to retrieve deposited ",u," balance.")),a.createElement("td",null,"".concat(v," ").concat(u),null===h&&a.createElement(Pt,{type:ye.Warning},"Failed to retrieve usable ",u," balance."))))}),s}}]),t}(a.Component);var Ft=Object(s.b)(function(e){return{sdk:e.sdk.sdk,supportedTokens:e.sdk.supportedTokens,accountBalances:e.trader.accountBalances,balances:e.trader.balances,usableBalances:e.trader.usableBalances,traderOrders:e.traderBook.traderOrders}})(_t),Vt=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"balances"},a.createElement(Ct,null),a.createElement(vt,{withMenu:!0}),a.createElement(Q,null),a.createElement("div",{className:"content"},a.createElement(xt,null),a.createElement(Ft,null),a.createElement(It,null),a.createElement(de,null)))}}]),t}(a.Component),Ht=8994,Wt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).bottomElement=null,n.scrollToBottom=function(){n.forceUpdate(function(){n.bottomElement&&n.bottomElement.scrollIntoView({behavior:"smooth"})})},n.onClickHandler=function(e){var t=n.state.level;n.setState({level:t+1})},n.state={level:Ht},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state.level;return a.createElement("div",{className:"monospace console ".concat(t>164+Math.pow(94,2)?"enhanced":""),onClick:this.onClickHandler},this.props.logs,a.createElement("div",{ref:function(t){e.bottomElement=t}}))}},{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentWillReceiveProps",value:function(){this.scrollToBottom()}}]),t}(a.Component),Yt=function(e){function t(e){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).call(this,e))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.spendToken,r=e.receiveToken,o=e.spendVolume,c=e.receiveVolume,s=e.leftArrow,i=n(70)("./".concat(t.icon)),l=n(70)("./".concat(r.icon));return a.createElement("div",{className:"open--tokens"},a.createElement("div",null,a.createElement("img",{alt:"",role:"presentation",src:i}),o&&a.createElement("p",null,o.toFixed()," ",t.symbol)),a.createElement("div",{className:"open--arrow"},s?"\u2190":"\u2192"),a.createElement("div",null,a.createElement("img",{alt:"",role:"presentation",src:l}),c&&a.createElement("p",null,c.toFixed()," ",r.symbol)))}}]),t}(a.Component),zt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).consoleBottom=null,n.renderConfirm=function(){var e=n.props,t=e.feePercent,r=e.orderInputs,o=r.symbol,c=r.side,s=r.price,i=r.volume,u=r.minVolume,d=o.split("/"),p=Object(l.a)(d,2),m=p[0],h=p[1],f=c===P.OrderSide.BUY?h:m,b=c===P.OrderSide.BUY?m:h,v=z.get(f,K),E=z.get(b,K),g=z.get(m,K),y=z.get(h,K),w=new H.a(i),O=new H.a(u||0),k=w.times(new H.a(s)),j=c===P.OrderSide.BUY?k:w,T=c===P.OrderSide.BUY?w:k,S=b,x=T.times(t);T=T.minus(x);var A=z.get(S,K);return a.createElement(a.Fragment,null,a.createElement("h2",null,"Confirm order details"),a.createElement(Yt,{spendToken:v,receiveToken:E,spendVolume:j,receiveVolume:T}),a.createElement("div",{className:"open--details"},a.createElement("p",null,a.createElement("span",null,"Price:")," ",s," ",y.symbol),a.createElement("p",null,a.createElement("span",null,"Minimum Volume:")," ",O.toFixed()," ",g.symbol),a.createElement("p",null,"Includes a ",x.toFixed()," ",A.symbol," fee")),a.createElement("div",{className:"popup--buttons"},a.createElement("button",{className:"open--confirm",onClick:n.onConfirm},a.createElement("span",null,"Confirm")),a.createElement("button",{onClick:n.props.closePopup},"Cancel")))},n.renderOpening=function(){var e=n.state,t=e.error,r=e.logs,o=n.props.closePopup,c=a.createElement("h2",null,"Opening order..."),s=a.createElement("p",null,"Please wait. Do not close this window.");if(t)switch(t.message){case Ue.a:c=a.createElement("h2",null,"Order canceled"),s=a.createElement("p",null);break;default:c=a.createElement("h2",{className:"red"},"Unable to complete transaction"),s=a.createElement("p",null,t.message)}return a.createElement(a.Fragment,null,c,s,t&&a.createElement("div",{className:"popup--buttons"},a.createElement("button",{onClick:o},"Close")),a.createElement(Wt,{logs:r}))},n.onConfirm=Object(p.a)(d.a.mark(function e(){var t,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.call,n.setState({confirmed:!0}),r={log:n.log,error:n.error},e.next=5,t(r).catch(function(e){console.error(e);try{n.setState({error:e})}catch(t){console.error(t)}});case 5:case"end":return e.stop()}},e,this)})),n.log=function(e){var t=n.state.logCount;n.setState({logCount:t+1,logs:n.state.logs.push(a.createElement("p",{key:t},e))})},n.error=function(e){var t=n.state.logCount;n.setState({logCount:t+1,logs:n.state.logs.push(a.createElement("p",{key:t,className:"red"},e))})},n.state={confirmed:void 0!==e.skipConfirm&&e.skipConfirm,error:null,logCount:0,logs:Object(y.List)()},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.confirmed){e.next=3;break}return e.next=3,this.onConfirm();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e;return e=this.state.confirmed?this.renderOpening():this.renderConfirm(),a.createElement("div",{className:"popup open"},e)}}]),t}(a.Component);var Kt=Object(s.b)(function(e){return{feePercent:e.sdk.darknodeFeePercent}},null)(zt),Gt=function(e,t,n,r){return{popup:a.createElement(Kt,{call:t,closePopup:n,orderInputs:e,skipConfirm:r}),dismissible:!1,onCancel:n}},qt=function(e,t,n,a,o,c,s,i,l){return function(){var u=Object(p.a)(d.a.mark(function u(m){var h,f,b,v,E,g,y,w;return d.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(h=Y.get(t,void 0)){u.next=3;break}return u.abrupt("return");case 3:f=h.orderSettlement===P.OrderSettlement.RenExAtomic,b=new H.a(a),v=new H.a(o),E=new H.a(c),g={symbol:"".concat(h.baseToken,"/").concat(h.quoteToken),side:n,price:b.toFixed(),volume:v,minVolume:E,type:s},y=function(t){return e.openOrder(g,{simpleConsole:t,awaitConfirmation:!1}).then(function(){var t=Object(p.a)(d.a.mark(function t(n){var r;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.traderOrder,m(nt([Fe(r)])),t.next=4,et(e)(m);case 4:m(U({alert:new je({alertType:ge.Success,message:"Your order has been sent"})})),m(Object(Ce.a)()),i&&i();case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){var e=Object(p.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&l(),!t.message.match("User denied transaction signature")){e.next=3;break}throw new Error(Ue.a);case 3:throw r.captureException(t),t;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},w=function(){m(Object(Ce.a)()),l&&l()},m(Object(Ce.b)(Gt(g,y,w,f)));case 11:case"end":return u.stop()}},u,this)}));return function(e){return u.apply(this,arguments)}}()},Xt=function(e,t){return function(){var n=Object(p.a)(d.a.mark(function n(a){return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n){var o=function(){a(Object(Ce.a)()),n()};a(at({orderID:t,orderCancelling:!0}));var c=function(){var n=Object(p.a)(d.a.mark(function n(){var c,s;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.cancelOrder(t,{awaitConfirmation:!1});case 2:if(c=n.sent,s=c.promiEvent){n.next=6;break}throw new Error("Unable to cancel order");case 6:return n.abrupt("return",s.on("transactionHash",Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o();case 1:case"end":return e.stop()}},e,this)}))).then(function(){a(rt({orderID:t,orderStatus:P.OrderStatus.CANCELED}));var e=function(){var e=Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(U({alert:new je({alertType:ge.Success,message:"Your order has been cancelled"})})),a(at({orderID:t,orderCancelling:!1}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();a(xe({id:"cancel: ".concat(t),method:e}))}).catch(function(e){if(a(at({orderID:t,orderCancelling:!1})),e.message.match("User denied transaction signature"))throw new Error(Ue.a);throw console.error(e),r.captureException(e),new Error("Unable to cancel order")}));case 7:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}();a(Object(Ce.b)(Le(c,o)))}));case 1:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},Jt=function(e){function t(e,n){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).timeout=void 0,r.rerender=void 0,r.state={highlightLatest:!1,receivedOrders:!1,relevantRows:0},r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.traderOrders.size<e.traderOrders.size?this.state.receivedOrders?(this.setState({highlightLatest:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){return t.setState({highlightLatest:!1})},3e3)):this.setState({receivedOrders:!0}):this.props.traderOrders.size>e.traderOrders.size&&this.setState({highlightLatest:!1})}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout),this.rerender&&clearTimeout(this.rerender)}},{key:"render",value:function(){var e=this,t=this.props.recent,n=this.props.traderOrders,r=null;if(n.size>0){var o=n.map(function(e){return ce(e.computedOrderDetails.date)}).reduce(function(e,t){return Math.min(e,t)},$.Day);this.rerender&&clearTimeout(this.rerender),this.rerender=setTimeout(function(){e.forceUpdate()},o/2),r=this.generateRows()}var c="Your ".concat(t?"latest ":"","submitted orders");return a.createElement("div",{className:"section trades"},a.createElement("div",{className:"container"},a.createElement(ne,{title:c}),a.createElement("div",{className:"table--wrapper"},a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Order ID"),a.createElement("th",null,"From"),a.createElement("th",null,"To"),a.createElement("th",null,"Price"),a.createElement("th",null,"Opened"),a.createElement("th",null,"Status"),a.createElement("th",null,"Cancel?"))),a.createElement("tbody",null,r?t?r.slice(0,5):r:a.createElement("tr",null,a.createElement("td",{colSpan:8},"No submitted orders"))))),t&&r&&r.length-5>0&&a.createElement("p",null,a.createElement(M.a,{to:"/orders"},"View ",r.length-5," more"))))}},{key:"handleCancel",value:function(){var e=Object(p.a)(d.a.mark(function e(t){var n,r,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.sdk,a=n.traderOrders,r&&a){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,this.props.actions.cancelOrder(r,t);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.error(e.t0),this.props.actions.setAlert({alert:new je({alertType:ge.Error,message:"Unable to cancel order"})});case 12:case"end":return e.stop()}},e,this,[[3,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"generateRows",value:function(){var e=this,t=this.props,n=t.traderOrders,r=t.sdk,o=t.cancelling,c=this.state.highlightLatest,s=!1,i=r.atom.isConnected(),l=n.toArray().reverse().filter(function(e){return e.trader.toLowerCase()===r.getAddress().toLowerCase()&&(s=!0,!0)}).map(function(t,n){var r=z.get(t.computedOrderDetails.spendToken,K),s=z.get(t.computedOrderDetails.receiveToken,K),l=(t.orderInputs.side===P.OrderSide.SELL?s:r).symbol,u=(t.orderInputs.side===P.OrderSide.SELL?r:s).symbol,d=t.computedOrderDetails.receiveVolume,p=t.computedOrderDetails.spendVolume;return a.createElement("tr",{key:n,className:"".concat(t.status.toLowerCase()," ").concat(0===n&&c?"recent":"")},a.createElement("td",null,a.createElement("span",{className:"monospace"},t.id)),a.createElement("td",{className:"volume right"},a.createElement("span",null,p.toString()," ",r.symbol)),a.createElement("td",{className:"volume right"},a.createElement("span",null,d.toString()," ",s.symbol)),a.createElement("td",{className:"price center"},"".concat(t.orderInputs.price.toFixed()," ").concat(l," to ").concat(u)),a.createElement("td",{className:"center",title:te()(1e3*t.computedOrderDetails.date).format("MMMM Do YYYY, HH:mm:ss")},a.createElement("span",null,ae(t.computedOrderDetails.date,{message:"Just now",suffix:"ago",countDown:!1}))),a.createElement("td",{className:"center"},t.status===P.OrderStatus.NOT_SUBMITTED?a.createElement(re.a,null):a.createElement("span",null,Zt(t.status),t.computedOrderDetails.orderSettlement!==P.OrderSettlement.RenExAtomic||t.status!==P.OrderStatus.CONFIRMED||i?null:a.createElement(Pt,{type:ye.Warning},"Unable to connect to Swapperd"))),a.createElement("td",{className:"center"},t.status===P.OrderStatus.OPEN?o.get(t.id,!1)?a.createElement(re.a,null):a.createElement("span",{className:"cross",role:"button",onClick:e.handleCancel.bind(e,t.id)},"\xd7"):a.createElement("span",null,"-")))});return s?l:null}}]),t}(a.Component),Zt=function(e){switch(e){case P.OrderStatus.NOT_SUBMITTED:return"Pending";case P.OrderStatus.FAILED_TO_SETTLE:return"Failed";case P.OrderStatus.OPEN:return"Open";case P.OrderStatus.CONFIRMED:return"Settling";case P.OrderStatus.CANCELED:return"Canceled";case P.OrderStatus.SETTLED:return"Settled";case P.OrderStatus.SLASHED:return"Aborted";default:return"Unknown"}};var $t=Object(s.b)(function(e){return{cancelling:e.traderBook.cancelling,traderOrders:e.traderBook.traderOrders,sdk:e.sdk.sdk}},function(e){return{actions:Object(T.b)({cancelOrder:Xt,setAlert:U},e)}})(Jt),Qt=function(e){function t(e,n){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).state={relevantRows:0},r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sdk,n=e.traderOrders.toArray().filter(function(e){return!!e.matchDetails&&e.trader.toLowerCase()===t.getAddress().toLowerCase()}),r=!0===this.props.recent,o=null;n.length>0&&(o=this.generateRows(n));var c="Your ".concat(r?"latest ":"","executed orders");return a.createElement("div",{className:"section trades"},a.createElement("div",{className:"container"},a.createElement(ne,{title:c}),a.createElement("div",{className:"table--wrapper"},a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Order ID"),a.createElement("th",null,"Match ID"),a.createElement("th",null,"Spent Amount"),a.createElement("th",null,"Receive Amount"))),a.createElement("tbody",null,null!==o?r?o.slice(0,5):o:a.createElement("tr",null,a.createElement("td",{colSpan:4},"No executed orders"))))),r&&null!==o&&o.length-5>0?a.createElement("p",null,a.createElement(M.a,{to:"/orders"},"View ",o.length-5," more")):null))}},{key:"generateRows",value:function(e){return e.reverse().map(function(e,t){var n=e.matchDetails;if(void 0===n)return a.createElement(a.Fragment,null);var r=z.get(n.receivedToken,K),o=z.get(n.spentToken,K),c=n.receivedVolume,s=n.spentVolume.plus(n.fee);return a.createElement("tr",{key:t},a.createElement("td",null,a.createElement("span",{className:"monospace"},n.orderID)),a.createElement("td",{className:"match"},a.createElement("span",{className:"monospace"},n.matchedID)),a.createElement("td",{className:"center volume"},a.createElement("span",null,"".concat(s," ").concat(o.symbol))),a.createElement("td",{className:"center volume"},a.createElement("span",null,"".concat(c," ").concat(r.symbol))))})}}]),t}(a.Component);var en,tn,nn=Object(s.b)(function(e){return{traderOrders:e.traderBook.traderOrders,sdk:e.sdk.sdk}})(Qt);!function(e){e[e.MIDPOINT=0]="MIDPOINT",e[e.LIMIT=1]="LIMIT"}(tn||(tn={}));var rn=(en={},Object(Et.a)(en,P.OrderStatus.NOT_SUBMITTED,"-"),Object(Et.a)(en,P.OrderStatus.OPEN,"Open"),Object(Et.a)(en,P.OrderStatus.CONFIRMED,"Matched"),Object(Et.a)(en,P.OrderStatus.CANCELED,"Canceled"),Object(Et.a)(en,P.OrderStatus.SETTLED,"Settled"),en),an=Object(C.createStandardAction)("SET_HIDDEN_ORDERS")(),on=function(e){return function(){var t=Object(p.a)(d.a.mark(function t(n){var r;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=y.List,t.next=3,e.fetchOrderbook({limit:10});case 3:t.t1=t.sent,r=(0,t.t0)(t.t1),n(an({hiddenOrders:r}));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()};var cn=function(e){function t(e,n){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).call(this,e,n))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.hiddenOrders;return a.createElement("div",{className:"section orderbook"},a.createElement("div",{className:"container"},a.createElement(ne,{title:"Hidden orderbook",description:"Last ".concat(10," orders")}),e?a.createElement("div",{className:"table--wrapper"},a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Order ID"),a.createElement("th",{className:"center"},"Status"))),a.createElement("tbody",null,e.size>0?e.reverse().toArray().map(function(e){return a.createElement("tr",{key:e.id},a.createElement("td",{className:"truncate"},a.createElement("span",{className:"monospace"},e.id)),a.createElement("td",{className:"center"},rn[e.status]))}):a.createElement("tr",null)))):a.createElement(re.a,null)))}}]),t}(a.Component);var sn=Object(s.b)(function(e){return{hiddenOrders:e.hiddenBook.hiddenOrders,sdk:e.sdk.sdk}})(cn),ln=n(62),un=function(e,t){var n=function(e,t){var n=z.get(t,K);void 0!==e&&""!==e||(e="0");var r=new H.a(10).pow(n.digits);return new De.a(new H.a(e).times(r).integerValue(H.a.ROUND_FLOOR).toFixed())}(e.toFixed(),t);return new H.a(function(e,t){var n=z.get(t,K);void 0===e&&(e=new De.a(0));var r=new H.a(e.toString()),a=new H.a(10).pow(n.digits);return r=r.div(a)}(n,t))},dn=n(294),pn=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,n=t.errors,r=t.dirty,a=e.title,c=e.symbol,s=e.disabled,i=e.hint,l=e.handleChange,u=e.handleBlur,d=e.notice,p=this.props.field,m=(p.onBlur,p.onChange,Object(dn.a)(p,["onBlur","onChange"]));return o.a.createElement("div",{className:"order--input-wrapper"},o.a.createElement("label",null,o.a.createElement("div",{className:"order--title"},o.a.createElement("span",null,a),i&&o.a.createElement(Pt,null,i)),o.a.createElement("span",{className:"order--input-item".concat(s?" disabled":"")},o.a.createElement("input",Object.assign({},m,{type:"number",step:this.calculateStep(),disabled:s,placeholder:"0",min:0,onChange:l,onBlur:u})),o.a.createElement("span",null,c))),!!n[m.name]&&r&&o.a.createElement("p",{className:"order--warning"},n[m.name]),!!d&&!n[m.name]&&o.a.createElement("p",{className:"order--message"},d))}},{key:"calculateStep",value:function(){var e=this.props,t=e.stepFunction,n=e.field;return t?t(new H.a(n.value||"0")):""}}]),t}(o.a.Component),mn=function(e){function t(){var e,n;Object(m.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).feeAmount=function(){var e=n.props,t=e.values,r=e.side,a=e.feePercent,o=e.settlementType,c=new H.a(t.volume||"0"),s=new H.a(t.priorityVolume||"0");return o===P.OrderSettlement.RenExAtomic?r===P.OrderSide.BUY?s.times(a):c.times(a):r===P.OrderSide.BUY?c.times(a):s.times(a)},n.fillVolume=function(){var e=n.props,t=e.market,r=e.values,a=e.side,o=e.settlementType===P.OrderSettlement.RenEx?n.props.usableBalances:n.props.usableAtomicBalances,c=r.pricepoint,s=Y.get(t,void 0);if(s){var i=s.quoteToken,l=s.baseToken,u=new H.a(0);if(a===P.OrderSide.BUY){var d=new H.a(c||"0");if(!d.isZero())u=(o.get(i)||new H.a(0)).div(d)}else u=o.get(l)||new H.a(0);n.setAndUpdateValues("volume",u.toFixed(),!0)}},n.handleChange=function(e){var t=e.target,r=t.name,a=t.value;n.setAndUpdateValues(r,a)},n.handleBlur=function(e){var t=e.target,r=t.name,a=t.value;n.setAndUpdateValues(r,a,!0)},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.values;(0,e.setValues)(this.calculateNewState(t))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.values,n=e.side;this.props.actions.setOrder({orderInputs:{side:n,pricepoint:t.pricepoint,volume:t.volume,minVolume:t.minVolume}})}},{key:"componentWillReceiveProps",value:function(){var e=Object(p.a)(d.a.mark(function e(t){var n,r,a,o,c,s,i,l,u,p,m,h,f;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.market,a=n.side,o=n.allOrNothing,c=n.initialMarketPrice,s=n.validateForm,i=n.values,l=r!==t.market,u=c!==t.initialMarketPrice,p=new H.a(i.pricepoint||"0"),(!i.minVolume&&!t.values.minVolume||l||u&&p.lte(new H.a(0)))&&(t.values.pricepoint=t.initialMarketPrice,m=Y.get(t.market,void 0),h=new H.a(t.initialMarketPrice),m&&!h.isZero()&&(f=t.calculateAbsoluteMinTradeVolume(m.baseToken,h),t.values.minVolume=new H.a(f).toFixed())),!o&&t.allOrNothing&&(t.values.minVolume=t.values.volume),!(a!==t.side)&&!l&&o===t.allOrNothing){e.next=12;break}return e.next=12,s();case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.feePercent,r=t.values,a=t.isSubmitting,c=t.isValid,s=t.settlementType,i=this.props,l=i.market,u=i.side,d=i.initialMarketPrice,p=i.allOrNothing,m=Y.get(l,void 0);if(!m)return null;var h=z.get(m.quoteToken,void 0),f=z.get(m.baseToken,void 0);if(!h||!f)return null;var b,v,E=h.symbol,g=f.symbol;if(s===P.OrderSettlement.RenExAtomic){b=u===P.OrderSide.BUY?h:f;var y=new H.a(u===P.OrderSide.BUY?r.priorityVolume:r.volume);v=y.gt(new H.a(0))?"You will spend ".concat(y.plus(this.feeAmount()).toFixed()," ").concat(b.symbol," after fees."):""}else{b=u===P.OrderSide.BUY?f:h;var w=new H.a(u===P.OrderSide.BUY?r.volume:r.priorityVolume);v=w.gt(new H.a(0))?"You will receive ".concat(w.minus(this.feeAmount()).toFixed()," ").concat(b.symbol," after fees."):""}return o.a.createElement(ln.b,null,o.a.createElement("div",{className:"order--inputs"},o.a.createElement(ln.a,{name:"pricepoint",render:function(t){return o.a.createElement(pn,Object.assign({},t,{title:o.a.createElement(o.a.Fragment,null,"Price (",o.a.createElement("span",{role:"button",className:"order--option",onClick:function(){e.setAndUpdateValues(t.field.name,d)}},"Market"),")"),disabled:void 0!==m.fixedPrice,symbol:E,stepFunction:ie,handleChange:e.handleChange,handleBlur:e.handleBlur}))}}),o.a.createElement(ln.a,{name:"volume",render:function(t){return o.a.createElement(pn,Object.assign({},t,{title:o.a.createElement(o.a.Fragment,null,u===P.OrderSide.BUY?"Receive":"Spend"," (",o.a.createElement("span",{role:"button",className:"order--option",onClick:e.fillVolume},"Max"),")"),symbol:g,stepFunction:le,handleChange:e.handleChange,handleBlur:e.handleBlur,notice:s===P.OrderSettlement.RenExAtomic?u===P.OrderSide.SELL&&v:u===P.OrderSide.BUY&&v}))}}),o.a.createElement(ln.a,{name:"minVolume",render:function(t){return o.a.createElement(pn,Object.assign({},t,{title:"Minimum Fill Amount",symbol:g,hint:"The minimum volume you are willing to be matched with. This does not affect price but higher minimum volumes reduce the chances of order match.",disabled:p,stepFunction:le,handleChange:e.handleChange,handleBlur:e.handleBlur}))}}),o.a.createElement(ln.a,{name:"priorityVolume",render:function(e){return o.a.createElement(pn,Object.assign({},e,{title:u===P.OrderSide.BUY?"Spend":"Receive",symbol:E,disabled:!0,stepFunction:le,notice:s===P.OrderSettlement.RenExAtomic?u===P.OrderSide.BUY&&v:u===P.OrderSide.SELL&&v}))}})),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("span",null,"Fee: ",this.feeAmount().toFixed()," ",b.symbol),o.a.createElement(Pt,null,"Fees are set to ",n.times(100).toFixed(),"% of the order volume."))),o.a.createElement("div",{className:"order--footer"},o.a.createElement("button",{className:"order--button ".concat(a?"submitting":""),type:"submit",disabled:!c||a},o.a.createElement("span",null,a?o.a.createElement(re.a,null):o.a.createElement(o.a.Fragment,null,u===P.OrderSide.BUY?"Buy":"Sell"," ",g)))))}},{key:"calculateNewState",value:function(e,t,n){var r=Object(gt.a)({},e);if(t){var a=void 0===n?e[t]:n;-1!==a.toLowerCase().indexOf("e")&&(a=new H.a(a).toFixed()),r=Object(gt.a)({},r,Object(Et.a)({},t,a))}var o=r,c=o.pricepoint,s=o.volume;this.props.allOrNothing&&(r.minVolume=r.volume);var i=new H.a(c||"0"),l=new H.a(s||"0").times(i);return r.priorityVolume=l.toFixed(),r}},{key:"coerceValues",value:function(e,t){var n=this.props,r=n.sdk,a=n.market,o=n.initialMarketPrice,c=n.calculateAbsoluteMinTradeVolume,s=n.side,i=r.utils,l=i.normalizePrice,u=i.normalizeVolume,d=Y.get(a,void 0);if(!d)return e;var p=new H.a(l(new H.a(e.pricepoint||"0"),s===P.OrderSide.SELL)),m=new H.a(u(un(new H.a(e.volume||"0"),d.baseToken))),h=new H.a(u(un(new H.a(e.minVolume||"0"),d.baseToken))),f=c(d.baseToken,p),b=Object(gt.a)({},e);switch(t){case"pricepoint":p.lte(new H.a(0))?b.pricepoint=o:b.pricepoint=p.toFixed();break;case"volume":b.volume=m.toFixed(),m.lt(h)&&(b.minVolume=H.a.max(m,f).toFixed());break;case"minVolume":b.minVolume=h.toFixed(),h.lt(f)&&(b.minVolume=f.toFixed()),h.gt(m)&&(b.volume=b.minVolume)}return this.calculateNewState(b,t)}},{key:"setAndUpdateValues",value:function(e,t,n){var r=this.props,a=r.setValues,o=r.values,c=this.calculateNewState(o,e,t);n&&(c=this.coerceValues(c,e)),a(c)}}]),t}(o.a.Component);var hn=Object(s.b)(function(e){return{sdk:e.sdk.sdk,feePercent:e.sdk.darknodeFeePercent,usableBalances:e.trader.usableBalances,usableAtomicBalances:e.trader.usableAtomicBalances}},function(e){return{actions:Object(T.b)({setOrder:_},e)}})(mn),fn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).handleSubmit=function(){var e=Object(p.a)(d.a.mark(function e(t,r){var a,o,c,s,i,l,u,p,m,h,f,b,v,E,g;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=r.setSubmitting,o=r.resetForm,c=n.props,s=c.market,i=c.sdk,l=n.state,u=l.side,p=l.immediateOrCancel,m=l.fillOrKill,h=t.pricepoint,f=t.volume,b=t.minVolume,v=p||m?P.OrderType.LIMIT_IOC:P.OrderType.LIMIT,E=function(){a(!1),o({pricepoint:h,volume:"0",minVolume:"0",priorityVolume:"0"})},g=function(){a(!1)},n.props.actions.openOrder(i,s,u,h||"0",f||"0",b||"0",v,E,g);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.validate=function(e){var t=n.props,r=(t.sdk,t.minEthereumTradeVolume),a=t.market,o=t.settlementType===P.OrderSettlement.RenEx?n.props.usableBalances:n.props.usableAtomicBalances,c=n.state,s=c.side,i=c.allOrNothing,l={},u=Y.get(a,void 0);if(!u)return l.volume="Unknown market pair.",l;var d=s===P.OrderSide.BUY?u.quoteToken:u.baseToken,p=s===P.OrderSide.BUY?"priorityVolume":"volume",m=o.get(d)||new H.a(0),h=new H.a(e[p]),f=z.get(d,K),b=new H.a(e.pricepoint||"0"),v=new H.a(e.volume||"0"),E=new H.a(e.minVolume||"0"),g=new H.a(e.priorityVolume||"0");if(m.lt(h)&&(l[p]="Insufficient ".concat(f.symbol," balance.")),u.quoteToken===P.Token.ETH&&g.lt(r)&&(l.priorityVolume="Minimum order size is ".concat(r.toFixed()," ETH.")),!b.isZero()){var y=n.calculateAbsoluteMinTradeVolume(u.baseToken,b),w=z.get(u.baseToken,K);if(E.lt(y)){var O=i?"Volume":"Minimum volume";l[i?"volume":"minVolume"]="".concat(O," must be at least ").concat(y.toFixed()," ").concat(w.symbol,".")}}return v.lt(E)&&(l.volume="Volume cannot be less than minimum volume."),l},n.handleMoreOptions=function(e){var t=e.target,r=t.name,a=t.checked;n.setState(function(e){return Object(gt.a)({},e,Object(Et.a)({},r,a))})},n.calculateAbsoluteMinTradeVolume=function(e,t){var r=n.props,a=r.sdk,o=r.minEthereumTradeVolume;switch(e){case P.Token.ETH:return o;case P.Token.WBTC:return new H.a(2e-4);default:return new H.a(a.utils.normalizeVolume(o.dividedBy(t),!0))}},n.state={showMoreOptions:!0,allOrNothing:!1,immediateOrCancel:!1,fillOrKill:!1,side:P.OrderSide.BUY},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.orderInputs;e.side!==this.state.side&&this.setState({side:e.side})}},{key:"render",value:function(){var e=this,t=this.state,n=t.fillOrKill,r=t.allOrNothing,a=t.immediateOrCancel,c=t.showMoreOptions,s=this.props,i=s.sdk,l=s.orderInputs,u=s.market,d=s.marketPrice,p=(s.usableBalances,s.usableAtomicBalances,s.settlementType),m=Y.get(u,void 0);if(!m)return o.a.createElement(o.a.Fragment,null);var h=z.get(m.baseToken,K),f=this.state.side,b=d?new H.a(i.utils.normalizePrice(d)).toFixed():"0";return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"order--wrapper order--wrapper--tabbed"},o.a.createElement("ul",{className:"order--tabs"},o.a.createElement("li",{className:f===P.OrderSide.BUY?"active":"",role:"tab",onClick:function(){e.setState({side:P.OrderSide.BUY})}},o.a.createElement("span",null,"Buy ",h.symbol)),o.a.createElement("li",{className:f===P.OrderSide.SELL?"active":"",role:"tab",onClick:function(){e.setState({side:P.OrderSide.SELL})}},o.a.createElement("span",null,"Sell ",h.symbol))),o.a.createElement(ln.c,{initialValues:{volume:l.volume||"",minVolume:l.minVolume||"",pricepoint:l.pricepoint||b,priorityVolume:""},validate:this.validate,onSubmit:this.handleSubmit,render:function(t){return o.a.createElement(hn,Object.assign({},t,{market:u,side:f,allOrNothing:r||n,initialMarketPrice:b,settlementType:p,calculateAbsoluteMinTradeVolume:e.calculateAbsoluteMinTradeVolume}))}})),o.a.createElement("div",{className:"order--options ".concat(c?"":"hidden")},o.a.createElement("label",null,o.a.createElement("input",{name:"allOrNothing",type:"checkbox",disabled:n,checked:r||n,onChange:this.handleMoreOptions}),"All or Nothing ",o.a.createElement(Pt,null,"Execute either the entire order or not at all.")),o.a.createElement("label",null,o.a.createElement("input",{name:"immediateOrCancel",type:"checkbox",disabled:n,checked:a||n,onChange:this.handleMoreOptions}),"Immediate or Cancel ",o.a.createElement(Pt,null,"If the order cannot be matched against the current orderbook, cancel the order.")),o.a.createElement("label",null,o.a.createElement("input",{name:"fillOrKill",type:"checkbox",disabled:r&&a,checked:n||r&&a,onChange:this.handleMoreOptions}),"Fill or Kill ",o.a.createElement(Pt,null,"If the entire order cannot be executed against the current orderbook, cancel the order."))))}}]),t}(o.a.Component);var bn=Object(s.b)(function(e){return{sdk:e.sdk.sdk,orderInputs:e.inputs.orderInputs,minEthereumTradeVolume:e.sdk.minEthTradeVolume,usableBalances:e.trader.usableBalances,usableAtomicBalances:e.trader.usableAtomicBalances}},function(e){return{actions:Object(T.b)({openOrder:qt},e)}})(fn),vn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).checkDisable=function(){var e=n.props.usableAtomicBalances,t=n.state,r=t.wrap,a=t.isSubmitting,o=new H.a(n.state.inputValue),c=r?"BTC":"WBTC",s=e.get(c)||new H.a(0);return!(o.gt(0)&&o.lte(s))||a},n.handleSubmit=function(){var e=Object(p.a)(d.a.mark(function e(t){var r,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state.wrap,n.setState({isSubmitting:!0,error:null}),t.preventDefault(),a=r?n.wrap():n.unwrap(),e.abrupt("return",a.then(function(e){console.log(e),n.setState({isSubmitting:!1})}).catch(function(e){console.error(e),n.setState({error:e.message,isSubmitting:!1})}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.wrap=Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.sdk,e.abrupt("return",t.atom.wrap(n.state.inputValue,"BTC"));case 2:case"end":return e.stop()}},e,this)})),n.unwrap=Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.sdk,e.abrupt("return",t.atom.unwrap(n.state.inputValue,"WBTC"));case 2:case"end":return e.stop()}},e,this)})),n.handleChange=function(){var e=Object(p.a)(d.a.mark(function e(t){var r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.target.value).indexOf("e")>=0&&(r=new H.a(r).toFixed()),n.setState({inputValue:r});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={error:null,linkPending:!1,inputValue:"0",wrap:!0,isSubmitting:!1},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.wrappingFeePercent,r=t.usableAtomicBalances,o=z.get("BTC",K),c=z.get("WBTC",K),s=this.state,i=s.isSubmitting,l=s.wrap,u=s.error,d=new H.a(this.state.inputValue);!d.isNaN()&&d.isFinite()||(d=new H.a(0));var p=l?o:c,m=r.get(p.symbol)||new H.a(0),h=l?c:o,f=d.times(n);return a.createElement("div",{className:"order--wrapper order--wrapper--tabbed"},a.createElement("ul",{className:"order--tabs"},a.createElement("li",{className:l?"active":"",role:"tab",onClick:function(){e.setState({wrap:!0})}},a.createElement("span",null,"Wrap BTC")),a.createElement("li",{className:l?"":"active",role:"tab",onClick:function(){e.setState({wrap:!1})}},a.createElement("span",null,"Unwrap WBTC"))),a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"order--inputs"},a.createElement("div",{className:"order--input-wrapper"},a.createElement("label",null,a.createElement("div",{className:"order--title"},a.createElement("span",null,"Spend")),a.createElement("span",{className:"order--input-item"},a.createElement("input",{min:"0",step:".00000001",type:"number",value:this.state.inputValue,onChange:this.handleChange}),a.createElement("span",null,p.symbol))),m.lt(d)?a.createElement("p",{className:"order--warning"},"Insufficient ",p.symbol," balance"):!f.isEqualTo(0)&&a.createElement("p",{className:"order--message"},"You will spend ",new H.a(this.state.inputValue).plus(f).toFixed()," ",l?"BTC":"WBTC"," after fees.")),a.createElement("div",{className:"order--input-wrapper"},a.createElement("label",null,a.createElement("div",{className:"order--title"},a.createElement("span",null,"Receive")),a.createElement("span",{className:"order--input-item"},a.createElement("input",{min:"0",step:".00000001",type:"number",value:this.state.inputValue,onChange:this.handleChange,disabled:!0}),a.createElement("span",null,h.symbol))))),!f.isEqualTo(0)&&a.createElement("div",null,a.createElement("span",null,"Fee: ",f.toFixed()," ",p.symbol),a.createElement(Pt,null,"Fees for ",l?"wrapping BTC":"unwrapping WBTC"," are set to ",n.times(100).toFixed(),"% of the order volume.")),a.createElement("div",{className:"order--footer"},a.createElement("button",{className:"order--button ".concat(i?"submitting":""),type:"submit",disabled:this.checkDisable()},a.createElement("span",null,i?a.createElement(re.a,null):l?"Wrap BTC":"Unwrap WBTC"))),u&&"User rejected the swap"!==u&&a.createElement("div",null,a.createElement("p",{className:"order--warning"},u))))}}]),t}(a.Component);var En=Object(s.b)(function(e){return{sdk:e.sdk.sdk,atomConnectionStatus:e.trader.atomConnectionStatus,usableAtomicBalances:e.trader.usableAtomicBalances,wrappingFeePercent:e.sdk.wrappingFeePercent}},function(e){return{actions:Object(T.b)({updateAtomConnectionStatus:Nt},e)}})(vn),gn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).mounted=void 0,n.mounted=!1,n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this.props,n=(t.sdk,t.market),r=t.marketPrices,o=Y.get(n,void 0);if(void 0===o)e=a.createElement("div",{className:"order--wrapper"},a.createElement("p",null,"Invalid market pair: ",n));else{var c=o.orderSettlement,s=o.fixedPrice?o.fixedPrice.toNumber():r.get(n,Oe).price;e=this.atomConnected()||c!==P.OrderSettlement.RenExAtomic?n===B.BTC_WBTC?a.createElement(En,null):a.createElement(bn,{market:n,marketPrice:s,settlementType:c}):a.createElement(Mt,null)}return a.createElement("div",{className:"section order"},a.createElement("div",{className:"container"},a.createElement(ne,{title:"Submit an order"}),a.createElement(Tt,null),e))}},{key:"atomConnected",value:function(){var e=this.props.atomConnectionStatus;return e===P.AtomicConnectionStatus.ConnectedLocked||e===P.AtomicConnectionStatus.ConnectedUnlocked}}]),t}(a.Component);var yn=Object(s.b)(function(e){return{market:e.inputs.market,marketPrices:e.marketPrices.marketPrices,sdk:e.sdk.sdk,atomConnectionStatus:e.trader.atomConnectionStatus}},null)(gn),wn=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[4],n=e[5];if(t&&n){var r=!0,a=!1,o=void 0;try{for(var c,s=Y.toArray()[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var i=c.value;if(t.toUpperCase()===i.quoteToken&&n.toUpperCase()===i.baseToken){this.props.actions.setMarket({market:i.code});break}}}catch(l){a=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}}}},{key:"render",value:function(){return a.createElement("div",{className:"exchange"},a.createElement(Ct,null),a.createElement(vt,{withMenu:!0}),a.createElement(Q,null),a.createElement("div",{className:"content"},a.createElement(yn,null),a.createElement($t,{recent:!0}),a.createElement(nn,{recent:!0}),a.createElement(sn,null)))}}]),t}(a.Component);var On=Object(s.b)(null,function(e){return{actions:Object(T.b)({setMarket:I},e)}})(wn),kn=n(95),jn=n.n(kn),Tn=Object(C.createStandardAction)("AGREE_TO_TERMS")(),Sn=function(e){function t(e,n){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).state={scrollBottom:!1},r.handleScroll=r.handleScroll.bind(Object(A.a)(Object(A.a)(r))),r.handleAgreement=r.handleAgreement.bind(Object(A.a)(Object(A.a)(r))),r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state.scrollBottom;return a.createElement("div",{className:"popup terms"},a.createElement("h2",null,"End User License Agreement"),a.createElement("div",{className:"terms--content",onScroll:this.handleScroll},a.createElement("p",null,"Please read this EULA carefully, as it sets out the basis upon which we license the Software for use. Before you download the Software from our website, we will ask you to give your express agreement to the provisions of this EULA. By agreeing to be bound by this EULA, you further agree that any person you authorise to use the Software will comply with the provisions of this EULA."),a.createElement("p",null,a.createElement("b",null,"AGREEMENT")),a.createElement("ol",null,a.createElement("li",null,"Definitions",a.createElement("ol",null,a.createElement("li",null,"Except to the extent expressly provided otherwise, in this EULA:",a.createElement("br",null),"\u201cDappbase Ventures Limited\u201d means the company incorporated in the British Virgin Islands (company number 1959524), with its registered office at Vistra Corporate Services Centre, Wickhams Cay II, Road Town, Tortola, VG 1110, British Virgin Islands;",a.createElement("br",null),"\u201cDocumentation\u201d means the documentation for the Software produced by the Licensor and delivered or made available by the Licensor to the User;",a.createElement("br",null),"\u201cEffective Date\u201d means the date upon which the User gives the User's express consent to this EULA, following the issue of this EULA by the Licensor;",a.createElement("br",null),"\u201cEULA\u201d means this end user licence agreement, including any amendments to this end user licence agreement from time to time;",a.createElement("br",null),"\u201cFees\u201d means the fees imposed on the User by the Licensor as specified on the Licensor\u2019s website at ",a.createElement("a",{href:"https://republicprotocol.com/",target:"_blank"},"https://republicprotocol.com/"),";",a.createElement("br",null),"\u201cForce Majeure Event\u201d means an event, or a series of related events, that is outside the reasonable control of the party affected (including failures of the internet or any public telecommunications network, hacker attacks, denial of service attacks, virus or other malicious software attacks or infections, power failures, industrial disputes affecting any third party, changes to the law, disasters, explosions, fires, floods, riots, terrorist attacks and wars);",a.createElement("br",null),"\u201cIntellectual Property Rights\u201d means all intellectual property rights wherever in the world, whether registrable or unregistrable, registered or unregistered, including any application or right of application for such rights (and these \u201cintellectual property rights\u201d include copyright and related rights, database rights, confidential information, trade secrets, know-how, business names, trade names, trademarks, service marks, passing off rights, unfair competition rights, patents, petty patents, utility models, semi-conductor topography rights and rights in designs);",a.createElement("br",null),"\u201cLicensor\u201d means Dappbase Ventures Limited (the company that owns the businesses associated with \u201cRenEx\u201d, and the \u201cRepublic Protocol\u201d trademark name), a company incorporated in the British Virgin Islands (company number 1959524), with its registered office at Vistra Corporate Services Centre, Wickhams Cay II, Road Town, Tortola, VG 1110, British Virgin Islands;",a.createElement("br",null),"\u201cMaintenance Services\u201d means the supply to the User and application to the Software of Updates and Upgrades;",a.createElement("br",null),"\u201cMinimum Term\u201d means, in respect of this EULA, the period of 12 months beginning on the Effective Date;",a.createElement("br",null),"\u201cPayments\u201d means the method for payment of fees imposed on the User by the Licensor as specified on the Licensor\u2019s website at ",a.createElement("a",{href:"https://republicprotocol.com/",target:"_blank"},"https://republicprotocol.com/"),";",a.createElement("br",null),"\u201cRenEx\u201d means the software platform provided by the Licensor that facilitates a decentralized dark pool exchange under the \u201cRepublic Protocol\u201d trademark for the trading of digital assets;",a.createElement("br",null),"\u201cRepublic Protocol\u201d means the trademark name under which the Licensor operates the its platform protocol for the building and operating of decentralized dark pool exchanges, including the RenEx dark pool exchange platform, including all related research, development and commercial activities;",a.createElement("br",null),"\u201cServices\u201d means any services that the Licensor provides to the User, or has an obligation to provide to the User, under this EULA;",a.createElement("br",null),"\u201cSoftware\u201d means software relating to the RenEx dark pool platform operated under the Republic Protocol trademark by the Licensor;",a.createElement("br",null),"\u201cSoftware Defect\u201d means a defect, error or bug in the Software having a material adverse effect on the appearance, operation, functionality or performance of the Software, but excluding any defect, error or bug caused by or arising as a result of:",a.createElement("ol",{type:"a"},a.createElement("li",null,"any act or omission of the User or any person authorised by the User to use the Software;"),a.createElement("li",null,"any use of the Software contrary to the Documentation by the User or any person authorised by the User to use the Software;"),a.createElement("li",null,"a failure of the User to perform or observe any of its obligations in this EULA; and/or"),a.createElement("li",null,"an incompatibility between the Software and any other system, network, application, program, hardware or software not specified as compatible in the Software Specification;")),"\u201cSoftware Specification\u201d means the specification for the Software set out in the Documentation;",a.createElement("br",null),"\u201cSource Code\u201d means the Software code in human-readable form or any part of the Software code in human-readable form, including code compiled to create the Software or decompiled from the Software, but excluding interpreted code comprised in the Software;",a.createElement("br",null),"\u201cSupport Services\u201d means support in relation to the use of the Software and the identification and resolution of errors in the Software, but shall not include the provision of training services whether in relation to the Software or otherwise;",a.createElement("br",null),"\u201cTerm\u201d means the term of this EULA, commencing in accordance with Clause 3.1 and ending in accordance with Clause 3.2;",a.createElement("br",null),"\u201cUpdate\u201d means a hotfix, patch or minor version update to the Software;",a.createElement("br",null),"\u201cUpgrade\u201d means a major version upgrade of the Software;",a.createElement("br",null),"\u201cUser\u201d means the person to whom the Licensor grants a right to use the Software under this EULA; and",a.createElement("br",null),"\u201cUser Indemnity Event\u201d has the meaning given to it in Clause 13.1."))),a.createElement("li",null,"Credit",a.createElement("ol",null,a.createElement("li",null,"This document was created using a template from SEQ Legal (",a.createElement("a",{href:"https://seqlegal.com",target:"_blank"},"https://seqlegal.com"),")."))),a.createElement("li",null,"Term",a.createElement("ol",null,a.createElement("li",null,"This EULA shall come into force upon the Effective Date."),a.createElement("li",null,"This EULA shall continue in force indefinitely, subject to termination in accordance with Clause 15 or any other provision of this EULA."))),a.createElement("li",null,"Licence",a.createElement("ol",null,a.createElement("li",null,"The Licensor hereby grants to the User from the date of supply of the Software to the User until the end of the Term a worldwide, non-exclusive licence to:",a.createElement("ol",{type:"a"},a.createElement("li",null,"install the Software; and"),a.createElement("li",null,"use the Software in accordance with the Documentation.")),"subject to the limitations and prohibitions set out and referred to in this Clause 4."),a.createElement("li",null,"The User may not sub-license and must not purport to sub-license any rights granted under Clause 4.1."),a.createElement("li",null,"Save to the extent expressly permitted by this EULA or required by applicable law on a non-excludable basis, any licence granted under this Clause 4 shall be subject to the following prohibitions:",a.createElement("ol",{type:"a"},a.createElement("li",null,"the User must not sell, resell, rent, lease, loan, supply, publish, distribute or redistribute the Software;"),a.createElement("li",null,"the User must not alter, edit or adapt the Software; and"),a.createElement("li",null,"the User must not decompile, de-obfuscate or reverse engineer, or attempt to decompile, de-obfuscate or reverse engineer, the Software."))),a.createElement("li",null,"The User shall be responsible for the security of copies of the Software supplied to the User under this EULA (or created from such copies) and shall use all reasonable endeavours (including all reasonable security measures) to ensure that access to such copies is restricted to persons authorised to use them under this EULA."))),a.createElement("li",null,"Source Code",a.createElement("ol",null,a.createElement("li",null,"Nothing in this EULA shall give to the User or any other person any right to access or use the Source Code or constitute any licence of the Source Code."))),a.createElement("li",null,"Maintenance Services",a.createElement("ol",null,a.createElement("li",null,"The Licensor may provide Maintenance Services to the User at its absolute own discretion. The Licensor is under no obligation to the User to provide such Maintenance Services, except as it determines from time to time in line with any technical and/or operational needs it may identify."))),a.createElement("li",null,"Support Services",a.createElement("ol",null,a.createElement("li",null,"The Licensor may provide Support Services to the User at its absolute own discretion. The Licensor is under no obligation to the User to provide such Support Services, except as it determines from time to time in line with any technical and/or operational needs it may identify."))),a.createElement("li",null,"No assignment of Intellectual Property Rights",a.createElement("ol",null,a.createElement("li",null,"Nothing in this EULA shall operate to assign or transfer any Intellectual Property Rights from the Licensor to the User, or from the User to the Licensor."))),a.createElement("li",null,"Fees",a.createElement("ol",null,a.createElement("li",null,"The User shall pay any relevant Fees that may be imposed by the Licensor for the use of its software, as specified on its website at ",a.createElement("a",{href:"https://republicprotocol.com/",target:"_blank"},"https://republicprotocol.com/")),a.createElement("li",null,"All amounts stated in or in relation to this EULA are, unless the context requires otherwise, stated on its website at ",a.createElement("a",{href:"https://republicprotocol.com/",target:"_blank"},"https://republicprotocol.com/")))),a.createElement("li",null,"Payments",a.createElement("ol",null,a.createElement("li",null,"Any relevant Payments will be deducted by the Licensor from the User for the use of its Software in accordance with the processes outlined on its website at ",a.createElement("a",{href:"https://republicprotocol.com/",target:"_blank"},"https://republicprotocol.com/")))),a.createElement("li",null,"Warranties",a.createElement("ol",null,a.createElement("li",null,"The Licensor warrants to the User that it has the legal right and authority to enter into this EULA and to perform its obligations under this EULA."),a.createElement("li",null,"The User warrants to the Licensor that it has the legal right and authority to enter into this EULA and to perform its obligations under this EULA."),a.createElement("li",null,"All of the parties' warranties and representations in respect of the subject matter of this EULA are expressly set out in this EULA. To the maximum extent permitted by applicable law, no other warranties or representations concerning the subject matter of this EULA will be implied into this EULA or any related contract."))),a.createElement("li",null,"Acknowledgements and warranty limitations",a.createElement("ol",null,a.createElement("li",null,"The User acknowledges that complex software is never wholly free from defects, errors and bugs; and subject to the other provisions of this EULA, the Licensor gives no warranty or representation that the Software will be wholly free from defects, errors and bugs."),a.createElement("li",null,"The User acknowledges that complex software is never entirely free from security vulnerabilities; and subject to the other provisions of this EULA, the Licensor gives no warranty or representation that the Software will be entirely secure."),a.createElement("li",null,"The User acknowledges that the Software is only designed to be compatible with that software specified as compatible in the Software Specification; and the Licensor does not warrant or represent that the Software will be compatible with any other software."),a.createElement("li",null,"The User acknowledges that the Licensor will not provide any legal, financial, accounting or taxation advice under this EULA or in relation to the Software; and, except to the extent expressly provided otherwise in this EULA, the Licensor does not warrant or represent that the Software or the use of the Software by the User will not give rise to any legal liability on the part of the User or any other person."))),a.createElement("li",null,"Indemnities",a.createElement("ol",null,a.createElement("li",null,'The User shall indemnify and shall keep indemnified the Licensor against any and all liabilities, damages, losses, costs and expenses (including legal expenses and amounts reasonably paid in settlement of legal claims) suffered or incurred by the Licensor and arising directly or indirectly as a result of any breach by the User of this EULA (a "User Indemnity Event").'),a.createElement("li",null,"The Licensor must:",a.createElement("ol",{type:"a"},a.createElement("li",null,"upon becoming aware of an actual or potential User Indemnity Event, notify the User;"),a.createElement("li",null,"provide to the User all such assistance as may be reasonably requested by the User in relation to the User Indemnity Event;"),a.createElement("li",null,"allow the User the exclusive conduct of all disputes, proceedings, negotiations and settlements with third parties relating to the User Indemnity Event; and"),a.createElement("li",null,"not admit liability to any third party in connection with the User Indemnity Event or settle any disputes or proceedings involving a third party and relating to the User Indemnity Event without the prior written consent of the User,")),"without prejudice to the User's obligations under Clause 13.1."),a.createElement("li",null,"The indemnity protection set out in this Clause 13 shall not be subject to the limitations and exclusions of liability set out in this EULA."))),a.createElement("li",null,"Limitations and exclusions of liability",a.createElement("ol",null,a.createElement("li",null,"Nothing in this EULA will:",a.createElement("ol",{type:"a"},a.createElement("li",null,"limit or exclude any liability for death or personal injury resulting from negligence;"),a.createElement("li",null,"limit or exclude any liability for fraud or fraudulent misrepresentation;"),a.createElement("li",null,"limit any liabilities in any way that is not permitted under applicable law; or"),a.createElement("li",null,"exclude any liabilities that may not be excluded under applicable law,")),"and, if a party is a consumer, that party's statutory rights will not be excluded or limited by this EULA, except to the extent permitted by law."),a.createElement("li",null,"The limitations and exclusions of liability set out in this Clause 14 and elsewhere in this EULA:",a.createElement("ol",{type:"a"},a.createElement("li",null,"are subject to Clause 14.1; and"),a.createElement("li",null,"govern all liabilities arising under this EULA or relating to the subject matter of this EULA, including liabilities arising in contract, in tort (including negligence) and for breach of statutory duty, except to the extent expressly provided otherwise in this EULA."))),a.createElement("li",null,"The Licensor will not be liable to the User in respect of any losses arising out of a Force Majeure Event."),a.createElement("li",null,"The Licensor will not be liable to the User in respect of any loss of profits or anticipated savings."),a.createElement("li",null,"The Licensor will not be liable to the User in respect of any loss of revenue or income."),a.createElement("li",null,"The Licensor will not be liable to the User in respect of any loss of business, contracts or opportunities."),a.createElement("li",null,"The Licensor will not be liable to the User in respect of any loss or corruption of any data, database or software."),a.createElement("li",null,"The Licensor will not be liable to the User in respect of any special, indirect or consequential loss or damage."),a.createElement("li",null,"The liability of the Licensor to the User under this EULA in respect of any event or series of related events shall not exceed the greater of:",a.createElement("ol",{type:"a"},a.createElement("li",null,"the total amount paid and payable by the User to the Licensor under this EULA."))),a.createElement("li",null,"The aggregate liability of the Licensor to the User under this EULA shall not exceed the greater of:",a.createElement("ol",{type:"a"},a.createElement("li",null,"the total amount paid and payable by the User to the Licensor under this EULA."))))),a.createElement("li",null,"Termination",a.createElement("ol",null,a.createElement("li",null,"The Licensor may terminate this EULA at its absolute own discretion by giving to the User written notice of termination."),a.createElement("li",null,"The User may terminate this EULA by giving to the Licensor not less than 30 days' written notice of termination, expiring at the end of any calendar month."),a.createElement("li",null,"Either party may terminate this EULA immediately by giving written notice of termination to the other party if:",a.createElement("ol",{type:"a"},a.createElement("li",null,"the other party commits any material breach of this EULA, and the breach is not remediable;"),a.createElement("li",null,"the other party commits a material breach of this EULA, and the breach is remediable but the other party fails to remedy the breach within the period of 30 days following the giving of a written notice to the other party requiring the breach to be remedied; or"),a.createElement("li",null,"the other party persistently breaches this EULA (irrespective of whether such breaches collectively constitute a material breach)."))),a.createElement("li",null,"Either party may terminate this EULA immediately by giving written notice of termination to the other party if:",a.createElement("ol",{type:"a"},a.createElement("li",null,"the other party:",a.createElement("ol",{type:"i"},a.createElement("li",null,"is dissolved;"),a.createElement("li",null,"ceases to conduct all (or substantially all) of its business;"),a.createElement("li",null,"is or becomes unable to pay its debts as they fall due;"),a.createElement("li",null,"is or becomes insolvent or is declared insolvent; or"),a.createElement("li",null,"convenes a meeting or makes or proposes to make any arrangement or composition with its creditors;"))),a.createElement("li",null,"an administrator, administrative receiver, liquidator, receiver, trustee, manager or similar is appointed over any of the assets of the other party;"),a.createElement("li",null,"an order is made for the winding up of the other party, or the other party passes a resolution for its winding up (other than for the purpose of a solvent company reorganisation where the resulting entity will assume all the obligations of the other party under this EULA); or"),a.createElement("li",null,"if that other party is an individual:",a.createElement("ol",{type:"i"},a.createElement("li",null,"that other party dies;"),a.createElement("li",null,"as a result of illness or incapacity, that other party becomes incapable of managing his or her own affairs; or"),a.createElement("li",null,"that other party is the subject of a bankruptcy petition or order."))))))),a.createElement("li",null,"Effects of termination",a.createElement("ol",null,a.createElement("li",null,"Upon the termination of this EULA, all of the provisions of this EULA shall cease to have effect, save that the following provisions of this EULA shall survive and continue to have effect (in accordance with their express terms or otherwise indefinitely): Clauses 1, 4.1, 10.1, 13, 14, 16, 17 and 18."),a.createElement("li",null,"Except to the extent that this EULA expressly provides otherwise, the termination of this EULA shall not affect the accrued rights of either party."),a.createElement("li",null,"Within 30 days following the termination of this EULA for any reason:",a.createElement("ol",{type:"a"},a.createElement("li",null,"the User must pay to the Licensor any Charges in respect of Services provided to the User before the termination of this EULA and in respect of licences in effect before the termination of this EULA; and"),a.createElement("li",null,"the Licensor must refund to the User any Charges paid by the User to the Licensor in respect of Services that were to be (but are not) provided to the User after the termination of this EULA and in respect of licences that were to be (but are not) in effect after the termination of this EULA,")),"without prejudice to the parties' other legal rights."),a.createElement("li",null,"For the avoidance of doubt, the licences of the Software in this EULA shall terminate upon the termination of this EULA; and, accordingly, the User must immediately cease to use the Software upon the termination of this EULA."),a.createElement("li",null,"Within 10 Business Days following the termination of this EULA, the User must:",a.createElement("ol",{type:"a"},a.createElement("li",null,"return to the Licensor or dispose of as the Licensor may instruct all media in its possession or control containing the Software; and"),a.createElement("li",null,"irrevocably delete from all computer systems in its possession or control all copies of the Software."))))),a.createElement("li",null,"General",a.createElement("ol",null,a.createElement("li",null,"No breach of any provision of this EULA shall be waived except with the express written consent of the party not in breach."),a.createElement("li",null,"If any provision of this EULA is determined by any court or other competent authority to be unlawful and/or unenforceable, the other provisions of this EULA will continue in effect. If any unlawful and/or unenforceable provision would be lawful or enforceable if part of it were deleted, that part will be deemed to be deleted, and the rest of the provision will continue in effect (unless that would contradict the clear intention of the parties, in which case the entirety of the relevant provision will be deemed to be deleted)."),a.createElement("li",null,"This EULA may not be varied except by a written document signed by or on behalf of each of the parties."),a.createElement("li",null,"The User hereby agrees that the Licensor may assign the Licensor's contractual rights and obligations under this EULA to any successor to all or a substantial part of the business of the Licensor from time to time. The User must not without the prior written consent of the Licensor assign, transfer or otherwise deal with any of the User's contractual rights or obligations under this EULA."),a.createElement("li",null,"This EULA is made for the benefit of the parties, and is not intended to benefit any third party or be enforceable by any third party. The rights of the parties to terminate, rescind, or agree any amendment, waiver, variation or settlement under or relating to this EULA are not subject to the consent of any third party."),a.createElement("li",null,"Subject to Clause 14.1, this EULA shall constitute the entire agreement between the parties in relation to the subject matter of this EULA, and shall supersede all previous agreements, arrangements and understandings between the parties in respect of that subject matter."),a.createElement("li",null,"This EULA shall be governed by and construed in accordance with the laws of the British Virgin Isles."),a.createElement("li",null,"The courts of the British Virgin Isles shall have exclusive jurisdiction to adjudicate any dispute arising under or in connection with this EULA."))),a.createElement("li",null,a.createElement("ol",null,a.createElement("li",null,"In this EULA, a reference to a statute or statutory provision includes a reference to:",a.createElement("ol",{type:"a"},a.createElement("li",null,"that statute or statutory provision as modified, consolidated and/or re-enacted from time to time; and"),a.createElement("li",null,"any subordinate legislation made under that statute or statutory provision."))),a.createElement("li",null,"The Clause headings do not affect the interpretation of this EULA."),a.createElement("li",null,'References in this EULA to "calendar months" are to the 12 named periods (January, February and so on) into which a year is divided.'),a.createElement("li",null,"In this EULA, general words shall not be given a restrictive interpretation by reason of being preceded or followed by words indicating a particular class of acts, matters or things."))))),a.createElement("p",null,"By proceeding, you accept the above EULA agreement as well as the ",a.createElement("a",{href:"/terms-and-conditions.pdf",target:"_blank"},"Terms & Conditions")," and ",a.createElement("a",{href:"/privacy-policy.pdf",target:"_blank"},"Privacy Policy"),"."),a.createElement("button",{disabled:!e,onClick:this.handleAgreement},a.createElement("p",null,"Accept & Continue")))}},{key:"handleScroll",value:function(e){e.currentTarget.scrollHeight-e.currentTarget.scrollTop<=e.currentTarget.clientHeight+30&&this.setState({scrollBottom:!0})}},{key:"handleAgreement",value:function(){this.props.actions.agreeToTerms({agreedToTerms:!0}),this.props.actions.clearPopup()}}]),t}(a.Component);var xn=Object(s.b)(null,function(e){return{actions:Object(T.b)({agreeToTerms:Tn,clearPopup:Ce.a},e)}})(Sn),An=xn,Cn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).getAccounts=Object(p.a)(d.a.mark(function e(){var t,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.referrer,n.setState({error:null}),e.prev=2,e.next=5,n.props.getAccounts();case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),n.setState({error:e.t0.message||e.t0.toString()}),e.abrupt("return");case 12:if(1!==r.length){e.next=16;break}return e.next=15,n.attemptVerification(r[0],t);case 15:return e.abrupt("return");case 16:n.setState({accounts:r});case 17:case"end":return e.stop()}},e,this,[[2,8]])})),n.onSelectAccount=function(){var e=Object(p.a)(d.a.mark(function e(t){var r,a,o,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props.referrer,a=n.state.accounts,!(null===(o=parseInt(t.currentTarget.getAttribute("data-item")||"0",10))||null===a||a.length<o)){e.next=6;break}return console.error("No account selected"),e.abrupt("return");case 6:return c=a[o],e.next=9,n.attemptVerification(c,r);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.attemptVerification=function(){var e=Object(p.a)(d.a.mark(function e(t,a){var o,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.props.url,c={address:t,referrer:a},e.prev=2,e.next=5,jn.a.post(window.NETWORK.ingress+"/login",JSON.stringify(c));case 5:if(!e.sent.data.verified){e.next=9;break}return n.props.resolve(t,o),e.abrupt("return");case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),r.captureException(e.t0);case 15:n.props.reject(t,Ue.b);case 16:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t,n){return e.apply(this,arguments)}}(),n.state={accounts:null,error:null},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccounts();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.accounts,r=t.error;return r?a.createElement("div",{className:"popup ledger"},a.createElement("h2",null,"Unable to retrieve accounts"),a.createElement("p",null,r),a.createElement("button",{onClick:this.getAccounts},"Retry")):a.createElement("div",{className:"popup accounts"},null!==n?a.createElement(a.Fragment,null,a.createElement("h2",null,"Select an account:"),n.map(function(t,n){return a.createElement("button",{key:n,"data-item":n,className:"account--button",onClick:e.onSelectAccount},a.createElement("div",{className:"account--left"},a.createElement(ft,{address:t})),a.createElement("div",{className:"account--right"},a.createElement("span",{className:"monospace"},t)))})):a.createElement(re.a,null))}}]),t}(a.Component);var Un=Object(s.b)(function(e){return{sdk:e.sdk.sdk,url:e.trader.url}})(Cn),Nn=function(e){function t(){var e,n;Object(m.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handler=void 0,n.openWyreHandler=function(){n.handler.open()},n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.closePopup;this.handler=new window.Wyre.Widget({accountId:window.WYRE_KEY,auth:{type:"metamask"},operation:{type:"none"},onSuccess:function(){t(),e.props.actions.setAlert({alert:new je({message:"Your application was successfully submitted. Check back later to view the status of your application",alertType:ge.Success})})},onExit:function(n){null!=n&&(console.error(n),t(),e.props.actions.setAlert({alert:new je({message:"There was an error submitting your application. Please try again later",alertType:ge.Error})}))}})}},{key:"render",value:function(){var e=location.protocol+"//"+location.host+location.pathname;return a.createElement("div",{className:"popup kyc content"},a.createElement("h2",null,"Verify your account"),a.createElement("p",null,"Please submit a KYC application, or check back later to see if your application has been approved."),a.createElement("div",{className:"popup--buttons"},a.createElement("a",{href:"https://kyber.network/oauth/authorize?client_id=".concat(window.KYBER_KEY,"&redirect_uri=").concat(e,"&response_type=code&state=").concat(this.props.address,",").concat(this.props.wallet)},a.createElement("button",{className:"kyber--button"},a.createElement("span",null,"Login with Kyber"))),a.createElement("button",{className:"wyre--button",onClick:this.openWyreHandler},a.createElement("span",null,"Verify with Wyre"))),a.createElement("p",null,"Note: Wyre currently supports US residents only."))}}]),t}(a.Component);var Ln=Object(s.b)(null,function(e){return{actions:Object(T.b)({setAlert:U},e)}})(Nn),Bn=function(e){function t(e,n){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).handleSelectWallet=Object(p.a)(d.a.mark(function e(){var t,n,o,c,s,i,u,m,h,f,b,v,E,y,w;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props,n=t.sdk,o=t.wallet,c=r.state.referrer,s=Ue.e.get(o,void 0)){e.next=5;break}return e.abrupt("return");case 5:return i=s.getWeb3Provider,r.setState({canceled:!1}),r.props.actions.storeWallet({wallet:o}),e.prev=8,e.next=11,i();case 11:h=e.sent,f=Object(l.a)(h,2),u=f[0],m=f[1],e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(8),e.t0.message!==Ue.a&&r.props.actions.setAlert({alert:new je({message:e.t0.message})}),r.props.actions.storeWallet({wallet:null}),e.abrupt("return");case 22:b=function(){var e=Object(p.a)(d.a.mark(function e(t,a){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.actions.login(n,u,t,{redirect:!0,url:a});case 2:r.props.actions.clearPopup(),r.props.actions.setAlert({alert:new je({message:"You have been successfully logged in",alertType:ge.Success})});case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),v=function(e,t){if(t===Ue.b){if(r.state.canceled)return;r.props.actions.setPopup({popup:a.createElement(Ln,{address:e,wallet:o,closePopup:E}),onCancel:E})}else E()},E=function(){r.props.actions.clearPopup(),r.setState({canceled:!0})},y=function(){var e=Object(p.a)(d.a.mark(function e(){var t,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new g.a(u),e.prev=1,!m){e.next=6;break}e.t0=m,e.next=9;break;case 6:return e.next=8,t.eth.getAccounts();case 8:e.t0=e.sent;case 9:n=e.t0,e.next=19;break;case 12:if(e.prev=12,e.t1=e.catch(1),o!==Ue.d.Ledger||!e.t1.message.match(/invalid transport instance/)){e.next=18;break}throw new Error("Unable to connect to Ledger.");case 18:throw e.t1;case 19:if(0!==n.length){e.next=25;break}if(o!==Ue.d.MetaMask){e.next=24;break}throw new Error("Please unlock your Metamask.");case 24:throw new Error("No accounts found. Your wallet may be locked.");case 25:if(o===Ue.d.Ledger||o===Ue.d.Keystore){e.next=31;break}return e.next=28,t.eth.net.getNetworkType();case 28:if(e.sent===W.b.ethNetwork){e.next=31;break}throw new Error("Please ensure you are on the ".concat(W.b.ethNetworkLabel," network"));case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}},e,this,[[1,12]])}));return function(){return e.apply(this,arguments)}}(),w={popup:a.createElement(Un,{referrer:c,getAccounts:y,resolve:b,reject:v,message:"Select account"}),onCancel:E},r.props.actions.setPopup(w);case 28:case"end":return e.stop()}},e,this,[[8,17]])})),r.state={referrer:"",canceled:!1},r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){if(-1!==window.location.href.indexOf("?ref=")){var e=In("ref");null!=e&&""!==e&&""===this.state.referrer&&this.setState({referrer:e})}}},{key:"render",value:function(){var e=this.props.wallet,t=Ue.e.get(e,void 0);if(void 0===t)return a.createElement(a.Fragment,null);var n=t.slug,r=t.enabled,o=t.description,c=t.name;return a.createElement("div",{className:"wallets--container ".concat(n," ").concat(r?"":"disabled")},a.createElement("div",{className:"wallets--item",role:"button",onClick:this.handleSelectWallet},a.createElement("span",{className:"wallets--title"},c),a.createElement("p",{className:"wallets--description"},r?null:"Coming soon",r&&""!==o?o:null)))}}]),t}(a.Component);var Dn=Object(s.b)(function(e){return{sdk:e.sdk.sdk,url:e.trader.url}},function(e){return{actions:Object(T.b)({setAlert:U,storeWallet:st,setPopup:Ce.b,clearPopup:Ce.a,login:dt},e)}})(Bn),Mn=function(e){function t(e,n){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).handleClick=r.handleClick.bind(Object(A.a)(Object(A.a)(r))),r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"section wallets"},a.createElement("div",{className:"container"},a.createElement("div",{className:"wallets--wrapper"},this.listWallets()),a.createElement("p",{className:"wallets--disclaimer"},"Your trades and transactions are stored locally within your browser.")))}},{key:"listWallets",value:function(){return Ue.f.map(function(e,t){return a.createElement(Dn,{key:t,wallet:e})})}},{key:"handleClick",value:function(){var e=this;this.props.actions.setPopup({popup:a.createElement(An,null),onCancel:function(){e.props.actions.clearPopup()}})}}]),t}(a.Component);var Pn=Object(s.b)(null,function(e){return{actions:Object(T.b)({clearPopup:Ce.a,setPopup:Ce.b},e)}})(Mn),Rn=function(e){function t(e,n){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).state={checkingVerification:!1},r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark(function e(){var t,n,r,a,o,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.actions.storeWallet({wallet:null}),-1===window.location.href.indexOf("?code=")){e.next=18;break}return this.setState({checkingVerification:!0}),e.next=5,this.kyberVerification();case 5:if(t=e.sent,n=t.verified,r=t.address,a=t.kyberUID,o=t.wallet,c=t.alert,!n||void 0===r||void 0===a||void 0===o){e.next=16;break}return e.next=14,this.handleForwardLogin(r,o);case 14:e.next=17;break;case 16:!n&&c&&this.props.actions.setAlert({alert:c});case 17:this.setState({checkingVerification:!1});case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.checkingVerification;return a.createElement("div",{className:"home"},e&&a.createElement(a.Fragment,null,a.createElement("div",{className:"popup"},a.createElement(re.a,null)),a.createElement("div",{className:"overlay"})),a.createElement(Ct,null),a.createElement(vt,{withMenu:!1}),a.createElement(Pn,null),a.createElement("div",{className:"content"},a.createElement(sn,null)))}},{key:"kyberVerification",value:function(){var e=Object(p.a)(d.a.mark(function e(){var t,n,a,o,c,s,i,l,u,p;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=In("code"),!(n=In("state"))){e.next=28;break}return a=n.split(",")[0],o=parseInt(n.split(",")[1],void 0),c=location.protocol+"//"+location.host+location.pathname,s={address:a,request:{grant_type:"authorization_code",code:t,redirect_uri:c,client_id:window.KYBER_KEY}},e.prev=7,e.next=10,jn.a.post(window.NETWORK.ingress+"/kyber",JSON.stringify(s));case 10:if(i=e.sent,l=i.data.uid,u=i.data.active_wallets.map(function(e){return e.toLowerCase()}),a){e.next=15;break}throw new Error("Unable to retrieve address from Kyber response");case 15:if("approved"===i.data.kyc_status){e.next=17;break}throw new Error("Received unexpected Kyber status: ".concat(i.data.kyc_status));case 17:if(-1!==u.indexOf(a.toLowerCase())){e.next=19;break}throw new Error("Address ".concat(a," not authorized with Kyber"));case 19:return e.abrupt("return",{verified:!0,address:a,kyberUID:l,wallet:o});case 22:return e.prev=22,e.t0=e.catch(7),e.t0.response&&401===e.t0.response.status?p=new je({message:"Your Kyber account has not been verified with address ".concat(a,". Please verify and check back later")}):(console.error(e.t0),r.captureException(e.t0),p=new je({message:"Unable to retrieve account verification details. Please try again later"})),e.abrupt("return",{verified:!1,alert:p});case 26:e.next=30;break;case 28:return console.error("Not enough information for Kyber KYC"),e.abrupt("return",{verified:!1});case 30:case"end":return e.stop()}},e,this,[[7,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleForwardLogin",value:function(){var e=Object(p.a)(d.a.mark(function e(t,n){var r,a,o,c,s,i,u,p;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props,a=r.actions,o=r.sdk,c=r.url,s=Ue.e.get(n,void 0),e.next=4,s.getWeb3Provider(t);case 4:return i=e.sent,u=Object(l.a)(i,1),p=u[0],e.next=9,Object(it.c)(new g.a(p),t);case 9:if(!e.sent){e.next=13;break}return a.login(o,p,t,{redirect:!0,url:c}),a.setAlert({alert:new je({message:"Successfully logged in via Kyber verification",alertType:ge.Success})}),e.abrupt("return");case 13:throw new Error("Logged in to a non-verified address.");case 14:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),t}(a.Component);function In(e){e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(window.location.href);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}var _n=Object(s.b)(function(e){return{sdk:e.sdk.sdk,url:e.trader.url}},function(e){return{actions:Object(T.b)({login:dt,storeWallet:st,setAlert:U},e)}})(Rn),Fn=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"logging-out"},a.createElement(re.a,null))}}]),t}(a.Component),Vn=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"orders"},a.createElement(Ct,null),a.createElement(vt,{withMenu:!0}),a.createElement(Q,null),a.createElement("div",{className:"content"},a.createElement($t,null),a.createElement(nn,null)))}}]),t}(a.Component),Hn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(b.a)(t).call(this,e))).onClickHandler=function(){var e=n.props.popup,t=e.dismissible,r=e.onCancel;t&&r()},n.onClickHandler=n.onClickHandler.bind(Object(A.a)(Object(A.a)(n))),n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.popup.popup;return e?a.createElement("div",{className:"popup--outer"},e,a.createElement("div",{role:"none",className:"overlay",onClick:this.onClickHandler})):null}}]),t}(a.Component);var Wn=Object(s.b)(function(e){return{popup:e.popup}})(Hn),Yn=Object(C.createStandardAction)("UPDATE_PRICES")(),zn=Object(C.createStandardAction)("STORE_SDK")(),Kn=Object(C.createStandardAction)("STORE_SDK_DATA")(),Gn=n(122),qn=Object(w.a)(function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return null}}]),t}(a.Component)),Xn=function(e){function t(e,n){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(b.a)(t).call(this,e,n))).setupLoopsTimeout=void 0,r.callGetBalancesTimeout=void 0,r.callHiddenOrdersTimeout=void 0,r.callUpdatePricesTimeout=void 0,r.callLookForLogoutTimeout=void 0,r.callConnectToAtomTimeout=void 0,r.callUpdateAtomStatusTimeout=void 0,r.callGetAtomicBalancesTimeout=void 0,r.callCheckOrderStatusesTimeout=void 0,r.callCheckRenExExecutionTimeout=void 0,r.callUpdateBalancesHistoryTimeout=void 0,r.state={checkingReLogin:!1},r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark(function e(){var t,n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.agreedToTerms,r=t.sdk,e.next=3,this.storeSDKData();case 3:return n||this.props.actions.setPopup((o=this.props.actions.clearPopup,{popup:a.createElement(xn,null),dismissible:!1,onCancel:o})),this.setState({checkingReLogin:!0}),e.next=7,this.handleReLogin();case 7:e.sent||this.props.actions.logout(r,{reload:!1}),this.setState({checkingReLogin:!1}),this.setupLoops();case 11:case"end":return e.stop()}var o},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setupLoopsTimeout&&clearTimeout(this.setupLoopsTimeout),this.callGetBalancesTimeout&&clearTimeout(this.callGetBalancesTimeout),this.callHiddenOrdersTimeout&&clearTimeout(this.callHiddenOrdersTimeout),this.callUpdatePricesTimeout&&clearTimeout(this.callUpdatePricesTimeout),this.callLookForLogoutTimeout&&clearTimeout(this.callLookForLogoutTimeout),this.callConnectToAtomTimeout&&clearTimeout(this.callConnectToAtomTimeout),this.callUpdateAtomStatusTimeout&&clearTimeout(this.callUpdateAtomStatusTimeout),this.callGetAtomicBalancesTimeout&&clearTimeout(this.callGetAtomicBalancesTimeout),this.callCheckOrderStatusesTimeout&&clearTimeout(this.callCheckOrderStatusesTimeout),this.callCheckRenExExecutionTimeout&&clearTimeout(this.callCheckRenExExecutionTimeout),this.callUpdateBalancesHistoryTimeout&&clearTimeout(this.callUpdateBalancesHistoryTimeout)}},{key:"setupLoops",value:function(){var e=this,t=function(){var n=Object(p.a)(d.a.mark(function n(){var r,a,o;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.props,a=r.sdk,o=r.wallet,!a.getAddress()||o!==Ue.d.MetaMask){n.next=10;break}return n.prev=2,n.next=5,e.props.actions.lookForLogout(a);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error(n.t0);case 10:e.callLookForLogoutTimeout=setTimeout(t,5e3);case 11:case"end":return n.stop()}},n,this,[[2,7]])}));return function(){return n.apply(this,arguments)}}();t().catch(console.error);var n=function(){var t=Object(p.a)(d.a.mark(function t(){var r,a,o;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.sdk,o=r.pendingAlerts,!a.getAddress()){t.next=4;break}return t.next=4,e.props.actions.getBalances(a,o);case 4:e.callGetBalancesTimeout=setTimeout(n,5e3);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();n().catch(console.error);var r=function(){var t=Object(p.a)(d.a.mark(function t(){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=e.props.sdk)||""===n.getAddress()){t.next=10;break}return t.prev=2,t.next=5,e.props.actions.refreshAtomConnectionStatus(n);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.error(t.t0);case 10:e.callUpdateAtomStatusTimeout=setTimeout(r,6e4);case 11:case"end":return t.stop()}},t,this,[[2,7]])}));return function(){return t.apply(this,arguments)}}();r().catch(console.error);var a=function(){var t=Object(p.a)(d.a.mark(function t(){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.sdk).getAddress()||!n.atom.isConnected()){t.next=10;break}return t.prev=2,t.next=5,e.props.actions.getAtomicBalances(n);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.error(t.t0);case 10:e.callGetAtomicBalancesTimeout=setTimeout(a,5e3);case 11:case"end":return t.stop()}},t,this,[[2,7]])}));return function(){return t.apply(this,arguments)}}();a().catch(console.error);var o=function(){var t=Object(p.a)(d.a.mark(function t(){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.sdk,t.prev=1,t.next=4,e.props.actions.getHiddenOrders(n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0);case 9:e.callHiddenOrdersTimeout=setTimeout(o,3e4);case 10:case"end":return t.stop()}},t,this,[[1,6]])}));return function(){return t.apply(this,arguments)}}();o().catch(console.error);var c=function(){var t=Object(p.a)(d.a.mark(function t(n){var r,a,o;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.sdk,o=r.balanceHistory,!a.getAddress()){t.next=11;break}return t.prev=2,t.next=5,e.props.actions.updateBalancesHistory(a,o,n%60===1);case 5:n++,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.error(t.t0);case 11:e.callUpdateBalancesHistoryTimeout=setTimeout(function(){return c(n)},1e4);case 12:case"end":return t.stop()}},t,this,[[2,8]])}));return function(e){return t.apply(this,arguments)}}();c(0).catch(console.error);var s=function(){var t=Object(p.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.updatePrices();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:e.callUpdatePricesTimeout=setTimeout(s,6e4);case 9:case"end":return t.stop()}},t,this,[[0,5]])}));return function(){return t.apply(this,arguments)}}();s().catch(console.error);var i=function(){var t=Object(p.a)(d.a.mark(function t(n){var r,a,o;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.sdk,o=r.traderOrders,!a.getAddress()){t.next=11;break}return t.prev=2,t.next=5,e.props.actions.checkOrderStatuses(a,o,n%120===1);case 5:n+=1,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.error(t.t0);case 11:e.callCheckOrderStatusesTimeout=setTimeout(function(){return i(n)},5e3);case 12:case"end":return t.stop()}},t,this,[[2,8]])}));return function(e){return t.apply(this,arguments)}}();i(0).catch(console.error)}},{key:"withAccount",value:function(e){var t=this.props.address;if(this.state.checkingReLogin)return function(){return a.createElement(Fn,null)};if(!t){var n=window.location.pathname;return"/"!==n&&"/loading"!==n&&(this.props.actions.setAlert({alert:new je({message:"You are not logged in. Please select your wallet to continue",alertType:ge.Warning})}),this.props.actions.storeURL(n)),function(){return a.createElement(O.a,{to:"/"})}}return e}},{key:"render",value:function(){return a.createElement(k.a,{history:x},a.createElement("div",{className:"app"},a.createElement(qn,null),a.createElement(j.a,{path:"/",exact:!0,component:_n}),a.createElement(j.a,{path:"/exchange",component:this.withAccount(On)}),a.createElement(j.a,{path:"/orders",component:this.withAccount(Vn)}),a.createElement(j.a,{path:"/balances",component:this.withAccount(Vt)}),a.createElement(j.a,{path:"/loading",component:Fn}),a.createElement(D,null),a.createElement(Wn,null)))}},{key:"updatePrices",value:function(){var e=Object(p.a)(d.a.mark(function e(){var t,n,r,a,o,c,s,i,u,p;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,r=void 0,e.prev=3,a=Y.toArray()[Symbol.iterator]();case 5:if(t=(o=a.next()).done){e.next=17;break}return c=o.value,e.next=9,G(c.quoteToken,c.baseToken);case 9:s=e.sent,i=Object(l.a)(s,2),u=i[0],p=i[1],this.props.actions.updatePrices({price:u,percentChange:p,pair:c.code});case 14:t=!0,e.next=5;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(3),n=!0,r=e.t0;case 23:e.prev=23,e.prev=24,t||null==a.return||a.return();case 26:if(e.prev=26,!n){e.next=29;break}throw r;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}},e,this,[[3,19,23,31],[24,,26,30]])}));return function(){return e.apply(this,arguments)}}()},{key:"storeSDKData",value:function(){var e=Object(p.a)(d.a.mark(function e(){var t,n=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.sdk,e.abrupt("return",Promise.all([t.fetchSupportedTokens(),t.fetchSupportedAtomicTokens(),t.fetchDarknodeFeePercent(),t.fetchWrappingFeePercent(),t.fetchMinEthTradeVolume(),t.fetchMarkets()]).then(function(e){var t=Object(l.a)(e,6),r=t[0],a=t[1],o=t[2],c=t[3],s=t[4],i=t[5];n.props.actions.storeSDKData({supportedTokens:Object(y.List)(r),supportedAtomicTokens:Object(y.List)(a),darknodeFeePercent:o,wrappingFeePercent:c,minEthTradeVolume:s,supportedMarkets:Object(y.List)(i)})}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleReLogin",value:function(){var e=Object(p.a)(d.a.mark(function e(){var t,n,r,a,o,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.address,r=t.actions,a=t.sdk,o=t.url,!n){e.next=19;break}return e.prev=2,e.next=5,Object(Gn.b)();case 5:c=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:return e.next=13,Object(it.c)(new g.a(c),n);case 13:if(!e.sent){e.next=19;break}return a.updateProvider(c),a.setAddress(n),r.login(a,c,n,{redirect:!1,url:o}),e.abrupt("return",!0);case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()}]),t}(a.Component);var Jn=Object(s.b)(function(e){return{address:e.trader.address,agreedToTerms:e.trader.agreedToTerms,balanceHistory:e.balanceHistory.balanceHistory,pendingAlerts:e.alert.pendingAlerts,sdk:e.sdk.sdk,traderOrders:e.traderBook.traderOrders,usableAtomicBalances:e.trader.usableAtomicBalances,usableBalances:e.trader.usableBalances,wallet:e.trader.wallet,url:e.trader.url}},function(e){return{actions:Object(T.b)({checkOrderStatuses:ct,clearPopup:Ce.a,getAtomicBalances:tt,getBalances:et,getHiddenOrders:on,login:dt,logout:pt,lookForLogout:mt,refreshAtomConnectionStatus:Lt,setAlert:U,setPopup:Ce.b,storeSDKData:Kn,storeURL:ut,updateBalancesHistory:Qe,updatePrices:Yn},e)}})(Xn),Zn=n(292),$n=n(97);var Qn=Object(T.c)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(C.getType)(U):return e.set("alert",t.payload.alert);case Object(C.getType)(N):return e.set("alert",new je({message:""}));case Object(C.getType)(xe):var n=t.payload,r=n.id,a=n.method;return e.set("pendingAlerts",e.pendingAlerts.set(r,a));case Object(C.getType)(Ae):var o=t.payload.ids,c=e.pendingAlerts,s=!0,i=!1,l=void 0;try{for(var u,d=o[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value;c=c.delete(p)}}catch(m){i=!0,l=m}finally{try{s||null==d.return||d.return()}finally{if(i)throw l}}return e.set("pendingAlerts",c);default:return e}},balanceHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(C.getType)($e):var n=e.balanceHistory;return t.payload.map(function(e){n=n.set(e.txHash,e)}),e.set("balanceHistory",n).set("updateIndex",e.updateIndex+1);default:return e}},hiddenBook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(C.getType)(an):return e.set("hiddenOrders",t.payload.hiddenOrders);default:return e}},inputs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(C.getType)(I):return e.set("market",t.payload.market);case Object(C.getType)(_):return e.set("orderInputs",t.payload.orderInputs);case Object(C.getType)(F):return e.set("balanceInputs",t.payload.balanceInputs);default:return e}},marketPrices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(C.getType)(Yn):var n=t.payload,r={price:n.price,percentChange:n.percentChange};return e.set("marketPrices",e.marketPrices.set(t.payload.pair,r));default:return e}},popup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(C.getType)(Ce.b):return document.documentElement.classList.add("noscroll"),e.set("popup",t.payload.popup).set("dismissible",!1!==t.payload.dismissible).set("onCancel",t.payload.onCancel);case Object(C.getType)(Ce.a):return document.documentElement.classList.remove("noscroll"),e.set("popup",null);default:return e}},traderBook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(C.getType)(nt):var n=t.payload,r=e.traderOrders;return n.map(function(e){r=r.set(e.id,e)}),e.set("traderOrders",r);case Object(C.getType)(rt):var a=e.traderOrders.get(t.payload.orderID,void 0);return a?(a=a.set("status",t.payload.orderStatus),e.set("traderOrders",e.traderOrders.set(a.id,a))):e;case Object(C.getType)(at):return e.set("cancelling",e.cancelling.set(t.payload.orderID,t.payload.orderCancelling));default:return e}},trader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(C.getType)(lt):return e.set("address",t.payload);case Object(C.getType)(ut):return e.set("url",t.payload);case Object(C.getType)(Ve):return e.set("balances",e.balances.set(t.payload.token,t.payload.balance));case Object(C.getType)(He):return e.set("balances",t.payload.balances);case Object(C.getType)(Ye):return e.set("usableBalances",e.usableBalances.set(t.payload.token,t.payload.usableBalance));case Object(C.getType)(We):return e.set("usableBalances",t.payload.usableBalances);case Object(C.getType)(Xe):return e.set("usableAtomicBalances",t.payload.usableAtomicBalances);case Object(C.getType)(ze):return e.set("accountBalances",e.accountBalances.set(t.payload.token,t.payload.accountBalance));case Object(C.getType)(Ke):return e.set("accountBalances",t.payload.accountBalances);case Object(C.getType)(Ge):return e.set("atomicBalances",t.payload.atomicBalances);case Object(C.getType)(qe):return e.set("atomicAddresses",t.payload.atomicAddresses);case Object(C.getType)(Nt):return e.set("atomConnectionStatus",t.payload.atomConnectionStatus);case Object(C.getType)(Tn):return e.set("agreedToTerms",t.payload.agreedToTerms);case Object(C.getType)(st):return e.set("wallet",t.payload.wallet);default:return e}},sdk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(C.getType)(zn):return console.assert(void 0!==t.payload.sdk),window.sdk=t.payload.sdk,e.set("sdk",t.payload.sdk);case Object(C.getType)(Kn):return e.set("supportedTokens",t.payload.supportedTokens).set("supportedAtomicTokens",t.payload.supportedAtomicTokens).set("darknodeFeePercent",t.payload.darknodeFeePercent).set("wrappingFeePercent",t.payload.wrappingFeePercent).set("minEthTradeVolume",t.payload.minEthTradeVolume).set("supportedMarkets",t.payload.supportedMarkets);default:return e}}}),er=n(293),tr=n.n(er),nr=Object($n.a)(function(e,t){try{return e.serialize()}catch(n){throw console.error("Error serializing ".concat(t," (").concat(JSON.stringify(e),"): ").concat(n)),n}},function(e,t){try{return(new Ee).deserialize(e)}catch(n){throw console.error("Error deserializing ".concat(t," (").concat(JSON.stringify(e),"): ").concat(n)),n}},{whitelist:["trader"]}),rr={storage:tr.a,key:"root",whitelist:["trader"],transforms:[nr]},ar=[Zn.a];var or,cr,sr=(or=rr,cr=Qn,Object($n.b)(or,cr));n(725);n.d(t,"store",function(){return lr}),n.d(t,"persistor",function(){return ur});var ir=function(){var e=Object(T.d)(sr,T.a.apply(void 0,ar));return{store:e,persistor:Object($n.c)(e)}}(),lr=ir.store,ur=ir.persistor;r.init({dsn:window.SENTRY_DSN,environment:window.NETWORK.network}),c.render(a.createElement(s.a,{store:lr},a.createElement(i.a,{loading:null,persistor:ur},a.createElement(Jn,null))),document.getElementById("root"))},620:function(e,t,n){e.exports=n.p+"static/media/btc.dd58cd55.svg"},621:function(e,t,n){e.exports=n.p+"static/media/dgx.09966c0f.svg"},622:function(e,t,n){e.exports=n.p+"static/media/eth.ac24c334.svg"},623:function(e,t,n){e.exports=n.p+"static/media/omg.cbd0e5e9.svg"},624:function(e,t,n){e.exports=n.p+"static/media/ren.05a00b3b.svg"},625:function(e,t,n){e.exports=n.p+"static/media/tusd.c377a1ca.svg"},626:function(e,t,n){e.exports=n.p+"static/media/wbtc.a81a823b.png"},627:function(e,t,n){e.exports=n.p+"static/media/wbtc.8122efc9.svg"},628:function(e,t,n){e.exports=n.p+"static/media/zrx.7ede344d.svg"},70:function(e,t,n){var r={"./btc.svg":620,"./dgx.svg":621,"./eth.svg":622,"./omg.svg":623,"./ren.svg":624,"./tusd.svg":625,"./wbtc.png":626,"./wbtc.svg":627,"./zrx.svg":628};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=70},725:function(e,t,n){}},[[295,2,1]]]);
//# sourceMappingURL=main.55a86ba2.chunk.js.map